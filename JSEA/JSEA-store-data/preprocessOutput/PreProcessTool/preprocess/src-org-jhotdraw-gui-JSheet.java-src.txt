# j sheet 2 0 2006 07 02 2005 2006 staldenmattweg 2 immensee h 6405 switzerland disclose accordance gui peer bean reflect plaf gui j sheet document modal dialog which display below title bar j frame p j sheet block input on it owner window visible p unlike application modal dialog show j sheet doe immediately when j sheet ha become visible need sheet listener get value j sheet p require 1 4 p caveat we are using unsupport p i call make j sheet translucent p i go away future macintosh runtime we hopefully just end up non opaque sheet author 1 4 2006 07 02 rewrite independent quaqua look feel 1 3 2006 04 15 request focus show window title parent window when display sheet regular dialog window 1 2 2006 02 18 set window decoration style n o n e get sheet border u i manager 1 1 2005 10 15 bring sheet front when showing option pane filechoos show message sheet sheet listener 1 0 1 2005 10 08 clear value 1 0 september 25 2005 create j sheet j dialog listener list listener list listener list listener list handler use handle movement owner owner move we have change location sheet well component listener owner movement handler non we put owner specify location when sheet hide point shift back location we need keep track old owner position order avoid processing duplicate owner move event point old location focus owner on owner window before sheet show component old focus owner set when listener j sheet are instal on parent component instal set j sheet us transition effect when show when hide animate create j sheet j sheet frame owner owner init create j sheet j sheet dialog owner owner init init get owner show sheet set undecorat get root pane set window decoration style j root pane n o n e get root pane set border u i manager get border sheet border we move sheet when user move owner so alway stay center below title bar owner user ha move owner we forget shift back location t shift owner back place wa when we open sheet owner movement handler component adapter component move component evt window owner get owner point location owner get location location equal old location set location location x + owner get width get width 2 location y + owner get inset top shift back location old location location show sheet u i manager get sheet show sheet install sheet on owner invoke just before j sheet show install sheet instal window owner get owner owner determine location sheet it owner sheet visible we have shift owner fully display dialog we remember shift back position point owner loc owner get location point sheet loc show sheet owner j frame sheet loc point owner loc x + owner get width get width 2 owner loc y + owner get inset top + j frame owner get root pane get content pane get y owner j dialog sheet loc point owner loc x + owner get width get width 2 owner loc y + owner get inset top + j dialog owner get root pane get content pane get y sheet loc point owner loc x + owner get width get width 2 owner loc y + owner get inset top sheet loc x 0 owner set location owner loc x sheet loc x owner loc y sheet loc x 0 shift back location owner loc old location owner get location shift back location old location owner loc sheet loc point owner loc x + owner get width get width 2 owner loc y + owner get height get height 2 set location sheet loc old focus owner owner get focus owner owner set focusable window state owner set enable j frame owner set resizable u i manager get sheet show sheet owner add component listener owner movement handler owner frame set title frame owner get title instal uninstall sheet on owner invoke immediately after j sheet hide uninstall sheet instal window owner get owner owner owner set focusable window state owner set enable j frame owner set resizable owner remove component listener owner movement handler shift back location owner set location shift back location old focus owner owner front old focus owner request focus instal add notify add notify u i manager get sheet show sheet ch quaqua quaqua utility set window alpha window t y p e 240 quaqua utility set window alpha 240 set j sheet us transition effect when show when hide set animate value old value animate animate value fire property change animate old value value j sheet us transition effect when show when hide animate animate dispose dispose uninstall sheet hide0 hide show0 show hide animate show sheet get content pane set visible rectangle start bound get bound parent width get parent get width rectangle end bound rectangle parent width start bound width ? start bound x + start bound width parent width 2 start bound x start bound y math start bound width parent width 0 timer timer timer 20 timer add action listener action listener start time end time action perform action evt now current time milli start time 0 start time now end time start time + 200 now end time timer stop hide0 set bound start bound get content pane set visible uninstall sheet ratio now start time end time start time set bound start bound x 1f ratio + end bound x ratio start bound y 1f ratio + end bound y ratio start bound width 1f ratio + end bound width ratio start bound height 1f ratio + end bound height ratio timer set repeat timer set initial delay 5 timer start hide0 uninstall sheet show animate show sheet install sheet get content pane set visible start time current time milli end time start time + 300 rectangle end bound get bound parent width get parent get width rectangle start bound rectangle parent width end bound width ? end bound x + end bound width parent width 2 end bound x end bound y math end bound width parent width 0 set bound start bound show0 timer timer timer 20 timer add action listener action listener start time end time action perform action evt now current time milli start time 0 start time now end time start time + 200 now end time timer stop set bound end bound get content pane set visible request focus reinsert window get parent front ratio now start time end time start time set bound start bound x 1f ratio + end bound x ratio start bound y 1f ratio + end bound y ratio start bound width 1f ratio + end bound width ratio start bound height 1f ratio + end bound height ratio timer set repeat timer set initial delay 5 timer start install sheet show0 add sheet listener add sheet listener sheet listener l listener list add sheet listener l remove sheet listener remove sheet listener sheet listener l listener list remove sheet listener l notify listener have register interest notification on type instance lazily create using pass fire fire option select j option pane pane value pane get value option value option j option pane l o s e d o p t i o n pane get option value option value value option j option pane l o s e d o p t i o n option j option pane l o s e d o p t i o n option pane get option i 0 n option length i n i++ option i equal value option i option j option pane l o s e d o p t i o n value fire option select pane option value pane get input value notify listener have register interest notification on type instance lazily create using pass fire fire option select j option pane pane option value input value sheet sheet guarantee non listener listener list get listener list process listener last first notify those are interest i listener length 2 i 0 i 2 listener i sheet listener lazily create sheet sheet sheet pane option value input value sheet listener listener i+1 option select sheet notify listener have register interest notification on type instance lazily create using pass fire fire option select j chooser pane option sheet sheet guarantee non listener listener list get listener list process listener last first notify those are interest i listener length 2 i 0 i 2 listener i sheet listener lazily create sheet sheet sheet pane option sheet listener listener i+1 option select sheet display option pane sheet on it parent window pane option pane parent component parent option pane listener listener sheet event show sheet j option pane pane component parent component sheet listener listener j sheet sheet create sheet pane parent component style message type pane get message type sheet add sheet listener listener sheet show bring up sheet option i yes i i i i cancel i parent component determine frame which sheet display parent component ha frame sheet display dialog message display ??? listener listener sheet event show confirm sheet component parent component message sheet listener listener show confirm sheet parent component message j option pane y e s n o n e l o p t i o n listener bring up sheet where number choice determine option type parameter parent component determine frame which sheet display parent component ha frame sheet display dialog message display option type designate option available on dialog y e s n o o p t i o n y e s n o n e l o p t i o n ??? listener listener sheet event show confirm sheet component parent component message option type sheet listener listener show confirm sheet parent component message option type j option pane q u e s t i o n m e s s g e listener bring up sheet where number choice determine option type parameter where message type parameter determine icon display message type parameter primarily use supply icon look feel parent component determine frame which dialog display parent component ha frame sheet display dialog message display option type designate option available on dialog y e s n o o p t i o n y e s n o n e l o p t i o n message type designate kind message primarily use determine icon pluggable look feel j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e ??? listener listener sheet event show confirm sheet component parent component message option type message type sheet listener listener show confirm sheet parent component message option type message type listener bring up sheet specify icon where number choice determine option type parameter message type parameter primarily use supply icon look feel parent component determine frame which dialog display parent component ha frame sheet display dialog message display option type designate option available on dialog y e s n o o p t i o n y e s n o n e l o p t i o n message type designate kind message primarily use determine icon pluggable look feel j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e icon icon display dialog ??? listener listener sheet event show confirm sheet component parent component message option type message type icon icon sheet listener listener show option sheet parent component message option type message type icon listener show question message sheet request input user parent parent component parent component parent component dialog ??? listener listener sheet event show input sheet component parent component message sheet listener listener show input sheet parent component message j option pane q u e s t i o n m e s s g e listener show question message sheet request input user parent parent component input value initialize initial selection value parent component parent component dialog message display initial selection value value use initialize input field ??? listener listener sheet event show input sheet component parent component message initial selection value sheet listener listener show input sheet parent component message j option pane q u e s t i o n m e s s g e initial selection value listener show sheet request input user parent parent component message type message type parent component parent component dialog message display message type type message display j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e ??? listener listener sheet event show input sheet component parent component message message type sheet listener listener show input sheet parent component message message type listener prompt user input sheet where initial selection possible selection other option specify user able choose selection value where implie user input whatever they wish usually mean j text field initial selection value initial value prompt user up u i decide how best represent selection value usually j combo box j list j text field use parent component parent component dialog message display message type type message display j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e icon icon image display selection value s give possible selection initial selection value value use initialize input field ??? listener listener sheet event show input sheet component parent component message message type icon icon selection value initial selection value sheet listener listener j option pane pane j option pane message message type j option pane o k n e l o p t i o n icon pane set want input pane set selection value selection value pane set initial selection value initial selection value pane set component orientation parent component ? j option pane get root frame parent component get component orientation style style message type message type j sheet sheet create sheet pane parent component style pane select initial value sheet add window listener window adapter window close window evt sheet dispose sheet add sheet listener listener sheet show sheet front bring up message sheet parent component determine frame which dialog display parent component ha frame sheet display dialog message display show message sheet component parent component message show message sheet parent component message j option pane i n f o r m t i o n m e s s g e bring up message sheet parent component determine frame which dialog display parent component ha frame sheet display dialog message display listener listener notify when sheet dismiss show message sheet component parent component message sheet listener listener show message sheet parent component message j option pane i n f o r m t i o n m e s s g e listener bring up sheet display message using icon determine message type parameter parent component determine frame which dialog display parent component ha frame sheet display dialog message display message type type message display j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e show message sheet component parent component message message type show message sheet parent component message message type bring up sheet display message using icon determine message type parameter parent component determine frame which dialog display parent component ha frame sheet display dialog message display message type type message display j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e listener listener notify when sheet dismiss show message sheet component parent component message message type sheet listener listener show message sheet parent component message message type listener bring up sheet display message specify parent component determine frame which sheet display parent component ha frame sheet display dialog message display message type type message display j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e icon icon display sheet help user identify kind message display listener listener notify when sheet dismiss show message sheet component parent component message message type icon icon sheet listener listener show option sheet parent component message j option pane d e f u l t o p t i o n message type icon listener bring up sheet specify icon where initial choice determine initial value parameter number choice determine option type parameter p option type y e s n o o p t i o n y e s n o n e l o p t i o n option parameter then option are supply look feel p message type parameter primarily use supply icon look feel parent component determine frame which dialog display parent component ha frame sheet display dialog message display option type designate option available on dialog y e s n o o p t i o n y e s n o n e l o p t i o n message type designate kind message primarily use determine icon pluggable look feel j option pane e r r o r m e s s g e j option pane i n f o r m t i o n m e s s g e j option pane r n i n g m e s s g e j option pane q u e s t i o n m e s s g e j option pane p l i n m e s s g e icon icon display dialog option indicate possible choice user make are component they are render properly non are render using their parameter option are determine look feel initial value represent selection dialog meaningful option use ??? listener listener sheet event show option sheet component parent component message option type message type icon icon option initial value sheet listener listener j option pane pane j option pane message message type option type icon option initial value pane set initial value initial value pane set component orientation parent component ? j option pane get root frame parent component get component orientation style style message type message type j sheet sheet create sheet pane parent component style pane select initial value sheet add sheet listener listener sheet show sheet front style message type message type message type j option pane e r r o r m e s s g e j root pane e r r o r d i l o g j option pane q u e s t i o n m e s s g e j root pane q u e s t i o n d i l o g j option pane r n i n g m e s s g e j root pane r n i n g d i l o g j option pane i n f o r m t i o n m e s s g e j root pane i n f o r m t i o n d i l o g j option pane p l i n m e s s g e j root pane p l i n d i l o g j sheet create sheet j option pane pane component parent component style window window get window component parent component j sheet sheet window frame sheet j sheet frame window sheet j sheet dialog window container content pane sheet get content pane content pane set layout border layout content pane add pane border layout e n t e r sheet set resizable sheet add window listener window adapter get focus count window closing window we pane set value window close window we pane get value j option pane u n i n i t i l i z e d v l u e sheet fire option select pane window gain focus window we once window get focus set initial focus get focus ugly dirty hack j option pane select initial value so we call directly u i cause mayhem because we override encapsulation pane select initial value option pane u i ui pane get u i ui ui select initial value pane get focus sheet add component listener component adapter component show component ce reset value ensure closing work properly pane set value j option pane u n i n i t i l i z e d v l u e pane add property change listener property change listener property change property change let close operation handle closing user close window select button value otherwise close sheet sheet visible get pane get property equal j option pane v l u e p r o p e r t y get value get value j option pane u n i n i t i l i z e d v l u e sheet set visible sheet fire option select pane sheet pack sheet specify component s toplevel frame dialog parent component component check frame dialog frame dialog contain component frame component doe have valid frame dialog parent window get window component component parent component parent component j option pane get root frame parent component frame || parent component dialog window parent component get window component parent component get parent display save chooser sheet note text appear approve button determine l f parent parent component dialog ??? listener listener sheet event show save sheet j chooser chooser component parent sheet listener listener chooser set dialog type j chooser s v e d i l o g show sheet chooser parent listener display open chooser sheet note text appear approve button determine l f parent parent component dialog ??? listener listener sheet event show open sheet j chooser chooser component parent sheet listener listener chooser set dialog type j chooser o p e n d i l o g show sheet chooser parent listener display custom chooser sheet custom approve button parent parent component dialog approve button text text approve button ??? listener listener sheet event show sheet j chooser chooser component parent approve button text sheet listener listener approve button text chooser set approve button text approve button text chooser set dialog type j chooser u s t o m d i l o g begin create dialog frame frame parent frame ? frame parent frame utility get ancestor frame parent title chooser get u i get dialog title chooser chooser get accessible context set accessible description title j sheet sheet j sheet frame sheet add sheet listener listener container content pane sheet get content pane content pane set layout border layout content pane add chooser border layout e n t e r end create dialog action listener action listener action listener action perform action evt option evt get action command equal approve selection option j chooser p p r o v e o p t i o n option j chooser n e l o p t i o n sheet hide sheet fire option select chooser option chooser remove action listener chooser add action listener action listener sheet add window listener window adapter window closing window e sheet fire option select chooser j chooser n e l o p t i o n chooser remove action listener action listener chooser rescan current directory sheet pack sheet show sheet front 