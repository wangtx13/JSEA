# drawing 2 1 2006 07 08 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? org jhotdraw draw org jhotdraw bean org jhotdraw undo org jhotdraw xml geom font event undo org jhotdraw io drawing author wern randelshof 2 1 2006 07 08 extend bean 2 0 1 2006 02 06 do ugly dirty fix index out of bound when undoing removal of figure 2 0 2006 01 14 change to support precision coordinate 1 0 2003 12 01 derive from jhotdraw 5 4b1 drawing bean drawing lock j panel get tree lock event listener list listener list event listener list font render context font render context create a instance drawing add drawing listener drawing listener listener listener list add drawing listener listener remove drawing listener drawing listener listener listener list remove drawing listener listener add undoable edit listener undoable edit listener l listener list add undoable edit listener l remove undoable edit listener undoable edit listener l listener list remove undoable edit listener l add all collection figure figure composite edit edit composite edit figuren hinzuf\u00fcgen fire undoable edit happen edit figure f figure add f fire undoable edit happen edit remove all figure clear remove all get figure get the number of figure get figure count get figure size remove all collection figure to be remove composite edit edit composite edit figuren entfernen fire undoable edit happen edit figure f list figure to be remove remove f fire undoable edit happen edit basic add all collection figure figure figure f figure basic add f basic remove all collection figure to be orphan note we create a collection to avoid problem that may be cause the collection is somehow connect to our figure connection figure f list figure to be orphan basic remove f call basic add and then call figure add notify and fire figure add add figure figure index get figure count basic add index figure figure add notify fire figure add figure fire undoable edit happen undoable edit get presentation name figur einf\u00fcgen undo cannot undo undo basic remove figure figure remove notify drawing fire figure remove figure redo cannot undo redo basic add index figure figure add notify drawing fire figure add figure basic add figure figure basic add get figure count figure call basic remove and then call figure add notify and fire figure add remove figure figure contain figure index index of figure basic remove figure figure remove notify fire figure remove figure fire undoable edit happen undoable edit get presentation name figur entfernen redo cannot undo redo basic remove figure figure remove notify drawing fire figure remove figure undo cannot undo undo basic add index figure figure add notify drawing fire figure add figure fire area invalidate figure get draw bound index of figure figure notify all listener list that have register interest notification on event type fire area invalidate rectangle2 d dirty region drawing event event notify all listener that have register interest guarantee to a non listener listener list get listener list process the listener last to first notify those that are interest in event i listener length 2 i 0 i 2 listener i drawing listener lazily create the event event event drawing event dirty region drawing listener listener i+1 area invalidate event notify all listener list that have register interest notification on event type fire undoable edit happen undoable edit edit undoable edit event event listener list get listener count 0 notify all listener that have register interest guarantee to a non listener listener list get listener list process the listener last to first notify those that are interest in event i listener length 2 i 0 i 2 event event undoable edit event edit listener i undoable edit listener undoable edit listener listener i+1 undoable edit happen event notify all listener list that have register interest notification on event type fire figure add figure f drawing event event notify all listener that have register interest guarantee to a non listener listener list get listener list process the listener last to first notify those that are interest in event i listener length 2 i 0 i 2 listener i drawing listener lazily create the event event event drawing event f f get draw bound drawing listener listener i+1 figure add event notify all listener list that have register interest notification on event type fire figure remove figure f drawing event event notify all listener that have register interest guarantee to a non listener listener list get listener list process the listener last to first notify those that are interest in event i listener length 2 i 0 i 2 listener i drawing listener lazily create the event event event drawing event f f get draw bound drawing listener listener i+1 figure remove event font render context get font render context font render context set font render context font render context frc font render context frc read dom input in i o in open element figure i 0 i in get element count i++ figure f add f figure in read i in close element write dom output out i o out open element figure figure f get figure out write f out close element the drawing view synchroniz on the lock when drawing a drawing get lock lock 