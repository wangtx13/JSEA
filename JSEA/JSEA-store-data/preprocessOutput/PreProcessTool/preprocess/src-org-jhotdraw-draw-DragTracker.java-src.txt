# drag tracker 2 0 2006 01 14 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? org jhotdraw draw geom event drag tracker author wern randelshof 2 0 2006 01 14 change to support precision coordinate 1 0 2003 12 01 derive from jhotdraw 5 4b1 drag tracker tool figure anchor figure point2 d old point point2 d anchor point is drag create a instance drag tracker figure figure anchor figure figure mouse move mouse event evt update cursor editor find view container evt get source point evt get x evt get y mouse press mouse event evt mouse press evt drawing view view get view evt is shift down view set handle detail level 0 view toggle selection anchor figure view is figure select anchor figure anchor figure view is figure select anchor figure view set handle detail level 0 view clear selection view add to selection anchor figure point2 d origin point2 d m a x v a l u e m a x v a l u e figure f view get select figure rectangle2 d b f get bound origin x math min origin x b x origin y math min origin y b y point2 d constrain origin view get constrain constrain point point2 d origin x origin y old point view get constrain constrain point view view to drawing point evt get x evt get y old point x + origin x constrain origin x old point y + origin y constrain origin y anchor point old point mouse drag mouse event evt drawing view view get view is drag is drag update cursor editor find view container evt get source point evt get x evt get y point2 d point view get constrain constrain point view view to drawing point evt get x evt get y affine transform tx affine transform tx translate point x old point x point y old point y figure f view get select figure f will change f basic transform tx f change old point point mouse release mouse event evt mouse release evt is drag x evt get x y evt get y update cursor editor find view container evt get source point evt get x evt get y point2 d p get view get constrain constrain point get view view to drawing point x y collection figure drag figure link list get view get select figure figure drop target get drawing find figure except p drag figure drop target snap back drop target handle drop p drag figure get view snap back affine transform tx affine transform tx translate anchor point x old point x anchor point y old point y figure f drag figure f will change f basic transform tx f change affine transform tx affine transform tx translate anchor point x + old point x anchor point y + old point y tx is identity get drawing fire undoable edit happen transform edit drag figure tx affine transform tx affine transform tx translate anchor point x + old point x anchor point y + old point y tx is identity get drawing fire undoable edit happen transform edit drag figure tx fire tool do 