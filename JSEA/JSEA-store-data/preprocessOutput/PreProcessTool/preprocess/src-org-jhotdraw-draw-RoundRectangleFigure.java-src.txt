# round rectangle figure 2 2 2006 06 17 1996 2006 contributor right reserve thi disclose accordance term enter draw geom io undo draw attribute key geom xml dom input xml dom output rectangle2 d round corner wern randelshof 2 2 2006 06 17 chop add 2 1 2006 05 29 basic set bound work bound small than 1 pixel 2 0 2006 01 14 change support coordinate 1 0 2004 03 02 derive 6 0b1 round rectangle figure extend attribute figure round rectangle2 d roundrect d e f u l t r 20 create instance round rectangle figure thi 0 0 0 0 round rectangle figure x y width height roundrect round rectangle2 d x y width height d e f u l t r d e f u l t r f i l l o l o r set thi color white s t r o k e o l o r set thi color black rectangle2 d get bound rectangle2 d roundrect get bounds2 d rectangle2 d get figure draw bound rectangle2 d r rectangle2 d roundrect get bounds2 d grow attribute key get perpendicular hit growth thi geom grow r grow grow r get arc width roundrect arcwidth get arc height roundrect archeight set arc h old width roundrect get arc width old height roundrect get arc height roundrect arcwidth roundrect archeight h fire figure change get draw bound fire undoable edit happen undoable edit get presentation rundung undo cannot undo undo change roundrect arcwidth old width roundrect archeight old height change redo cannot redo redo change roundrect arcwidth roundrect archeight h change protect draw fill graphics2 d g round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular fill growth thi r x grow r y grow r width + grow 2 r height + grow 2 r arcwidth + grow 2 r archeight + grow 2 r width 0 r height 0 g fill r protect draw stroke graphics2 d g round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular draw growth thi r x grow r y grow r width + grow 2 r height + grow 2 r arcwidth + grow 2 r archeight + grow 2 r width 0 r height 0 g draw r check point2 d inside figure contain point2 d p round rectangle2 d r round rectangle2 d roundrect clone grow attribute key get perpendicular hit growth thi r x grow r y grow r width + grow 2 r height + grow 2 r arcwidth + grow 2 r archeight + grow 2 r contain p basic set bound point2 d anchor point2 d roundrect x math anchor x x roundrect y math anchor y y roundrect width math 0 1 math ab x anchor x roundrect height math 0 1 math ab y anchor y transform figure tx transformation basic transform affine transform tx point2 d anchor get start point point2 d get end point basic set bound point2 d tx transform anchor anchor point2 d tx transform collection handle create handle detail level link list handle handle link list handle create handle detail level handle add round rect radius handle thi handle connector find connector point2 d p connection figure prototype chop round rect connector thi connector find compatible connector connector start connector chop round rect connector thi round rectangle figure clone round rectangle figure round rectangle figure clone roundrect round rectangle2 d thi roundrect clone override read dom input i o read roundrect arcwidth get attribute arc width d e f u l t r roundrect archeight get attribute arc height d e f u l t r override write dom output out i o write out out add attribute arc width roundrect arcwidth out add attribute arc height roundrect archeight restore geometry round rectangle2 d r round rectangle2 d geometry roundrect x r x roundrect y r y roundrect width r width roundrect height r height get restore data roundrect clone point2 d chop point2 d rectangle2 d out get bound grow s t r o k e p l e m e n t get thi e n t e r grow attribute key get stroke total width thi 2 o u t s e grow attribute key get stroke total width thi i n s e grow 0 out x grow out y grow out width + grow 2 out height + grow 2 rectangle2 d inner rectangle2 d out clone gw get arc width + grow 2 2 gh get arc height + grow 2 2 inner x gw inner y gh inner width + gw 2 inner height + gh 2 angle geom point angle out point2 d p geom angle point out geom point angle out p x out x || p x out x + out width p y math math p y inner y inner y + inner height p x math math p x inner x inner x + inner width p 