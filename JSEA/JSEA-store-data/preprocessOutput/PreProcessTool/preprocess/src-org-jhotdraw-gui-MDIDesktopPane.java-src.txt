# m d idesktop pane 1 0 2006 06 17 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw gui event bean org jhotdraw app action arrangeable an extension of j desktop pane that support often use m d i functionality also handle setting scroll bar when window move too far to the left or bottom provide the m d idesktop pane is in a scroll pane note by dnoyeb i dont know why the container doe not fire frame close event when the frame are remove from the container with remove a oppose to simply close with the x so you say remove all from container you wont be notify no biggie author wern randelshof original by wolfram kaiser adapt from an article in world c l gilbert dnoyeb user sourceforge net 1 0 2006 06 17 m d idesktop pane j desktop pane arrangeable f r a m e o f f s e t 20 m d idesktop manager manager m d idesktop pane manager m d idesktop manager set desktop manager manager set drag mode j desktop pane o u t l i n e d r a g m o d e set alignment x j component l e f t a l i g n m e n t set arrangement arrangeable arrangement value arrangeable arrangement old value get arrangement value c a s c a d e arrange frame cascade h o r i z o n t a l arrange frame horizontally v e r t i c a l arrange frame vertically fire property change arrangement old value value arrangeable arrangement get arrangement f i x m e check the arrangement of the j internal frame here and the value arrangeable arrangement c a s c a d e cascade all internal frame arrange frame cascade x 0 y 0 j internal frame all frame get all frame nothing no frame to work with all frame length 0 manager set normal size frame height get bound height 5 all frame length f r a m e o f f s e t frame width get bound width 5 all frame length f r a m e o f f s e t i all frame length 1 i 0 i all frame i set maximum property veto e e print stack trace all frame i set bound x y frame width frame height x x + f r a m e o f f s e t y y + f r a m e o f f s e t check desktop size tile frame horizontally component all frame get all frame nothing no frame to work with all frame length 0 manager set normal size frame height get bound height all frame length y 0 i 0 i all frame length i++ j internal frame all frame i set maximum property veto e e print stack trace all frame i set bound 0 y get bound width frame height y y + frame height check desktop size tile frame vertically component all frame get all frame nothing no frame to work with all frame length 0 manager set normal size frame width get bound width all frame length x 0 i 0 i all frame length i++ j internal frame all frame i set maximum property veto e e print stack trace all frame i set bound x 0 frame width get bound height x x + frame width check desktop size arrange the frame a efficiently a possibly with preference keeping vertical size maximal arrange frame vertically component all frame get all frame nothing no frame to work with all frame length 0 manager set normal size vert frame math floor math sqrt all frame length hor frame math ceil math sqrt all frame length first arrange the window that have equal size frame width get bound width hor frame frame height get bound height vert frame x 0 y 0 frame idx 0 hor cnt 0 hor cnt hor frame 1 hor cnt++ y 0 vert cnt 0 vert cnt vert frame vert cnt++ j internal frame all frame frame idx set maximum property veto e e print stack trace all frame frame idx set bound x y frame width frame height frame idx++ y y + frame height x x + frame width the rest of the frame are tile down on the last column with equal height frame height get bound height all frame length frame idx y 0 frame idx all frame length frame idx++ j internal frame all frame frame idx set maximum property veto e e print stack trace all frame frame idx set bound x y frame width frame height y y + frame height check desktop size arrange the frame a efficiently a possibly with preference keeping horizontal size maximal arrange frame horizontally component all frame get all frame nothing no frame to work with all frame length 0 manager set normal size vert frame math ceil math sqrt all frame length hor frame math floor math sqrt all frame length first arrange the window that have equal size frame width get bound width hor frame frame height get bound height vert frame x 0 y 0 frame idx 0 vert cnt 0 vert cnt vert frame 1 vert cnt++ x 0 hor cnt 0 hor cnt hor frame hor cnt++ j internal frame all frame frame idx set maximum property veto e e print stack trace all frame frame idx set bound x y frame width frame height frame idx++ x x + frame width y y + frame height the rest of the frame are tile down on the last column with equal height frame width get bound width all frame length frame idx x 0 frame idx all frame length frame idx++ j internal frame all frame frame idx set maximum property veto e e print stack trace all frame frame idx set bound x y frame width frame height x x + frame width check desktop size set all component size property maximum minimum prefer to the given dimension set all size dimension d set minimum size d set maximum size d set prefer size d set bound 0 0 d width d height set all component size property maximum minimum prefer to the given width and height set all size width height set all size dimension width height check desktop size get parent is visible manager resize desktop use to replace the standard desktop manager j desktop pane use to provide scrollbar functionality m d idesktop manager desktop manager m d idesktop pane desktop m d idesktop manager m d idesktop pane desktop desktop desktop end resize frame j component f end resize frame f resize desktop end drag frame j component f end drag frame f resize desktop set normal size j scroll pane scroll pane get scroll pane inset scroll inset get scroll pane inset scroll pane dimension d scroll pane get visible rect get size scroll pane get border d set size d get width scroll inset left scroll inset right d get height scroll inset top scroll inset bottom d set size d get width 20 d get height 20 desktop set all size d scroll pane invalidate scroll pane validate inset get scroll pane inset j scroll pane scroll pane get scroll pane scroll pane || get scroll pane get border inset 0 0 0 0 get scroll pane get border get border inset scroll pane j scroll pane get scroll pane desktop get parent j viewport j viewport view port j viewport desktop get parent view port get parent j scroll pane j scroll pane view port get parent resize desktop x 0 y 0 j scroll pane scroll pane get scroll pane inset scroll inset get scroll pane inset scroll pane j internal frame all frame desktop get all frame i 0 i all frame length i++ all frame i get x + all frame i get width x x all frame i get x + all frame i get width all frame i get y + all frame i get height y y all frame i get y + all frame i get height dimension d scroll pane get visible rect get size scroll pane get border d set size d get width scroll inset left scroll inset right d get height scroll inset top scroll inset bottom x d get width x d get width 20 y d get height y d get height 20 desktop set all size x y scroll pane invalidate scroll pane validate 