# bezi node handle 1 0 1 2006 04 21 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw draw org jhotdraw org jhotdraw undo event geom org jhotdraw geom bezi node handle author wern randelshof 1 0 1 2006 04 21 t change node type when right mouse button is down 1 0 january 20 2006 create bezi node handle handle index composite edit edit bezi path node old node create a instance bezi node handle bezi figure owner index owner index index draw handle draw graphics2 d g bezi figure f get bezi figure f get point count index bezi path node v f get node index v mask 0 draw rectangle g color black color white v mask bezi path c1 m a s k || v mask bezi path c2 m a s k || f is close v mask bezi path c1 m a s k | bezi path c2 m a s k index 0 || index f get node count 1 draw diamond g color black color white draw circle g color black color white bezi figure get bezi figure bezi figure get owner point get location get bezi figure get point count index ? view drawing to view get bezi figure get point index 0 point 10 10 rectangle basic get bound rectangle r rectangle get location r grow get handlesize 2 get handlesize 2 r track start point anchor modifier ex bezi figure figure get bezi figure view get drawing fire undoable edit happen edit composite edit punkt verschieben point2 d location view get constrain constrain point view view to drawing get location point2 d p view get constrain constrain point view view to drawing anchor old node figure get node index fire handle request secondary handle track step point anchor point modifier ex bezi figure figure get bezi figure figure will change point2 d p view get constrain constrain point view view to drawing bezi path node n figure get node index fire area invalidate n n move to p fire area invalidate n figure basic set node index n figure change fire area invalidate bezi path node v rectangle2 d dr rectangle2 d v x 0 v y 0 0 0 i 1 i 3 i++ dr add v x i v y i rectangle vr view drawing to view dr vr grow get handlesize get handlesize fire area invalidate vr track end point anchor point modifier ex bezi figure f get bezi figure change node type modifier ex input event m e t a d o w n m a s k | input event c t r l d o w n m a s k 0 modifier ex input event b u t t o n2 d o w n m a s k 0 f will change bezi path node v f get node index index 0 index f get node count || f is close v mask v mask + 3 % 4 index 0 v mask v mask bezi path c2 m a s k 0 ? bezi path c2 m a s k 0 v mask v mask bezi path c1 m a s k 0 ? bezi path c1 m a s k 0 f basic set node index v f change fire handle request secondary handle view get drawing fire undoable edit happen bezi node edit f index old node f get node index view get drawing fire undoable edit happen edit override is combinable with handle h is combinable with h bezi node handle that bezi node handle h that index index that get bezi figure get node count get bezi figure get node count track click point p modifier ex bezi figure f get bezi figure f get node count 2 modifier ex input event m e t a d o w n m a s k | input event c t r l d o w n m a s k | input event a l t d o w n m a s k 0 rectangle invalidate area get draw bound f will change f basic remove node index f change fire handle request remove invalidate area collection handle create secondary handle bezi figure f get bezi figure link list handle list link list handle bezi path node v f get node index v mask bezi path c1 m a s k 0 index 0 || f is close list add bezi control point handle f index 1 v mask bezi path c2 m a s k 0 index f get node count 1 || f is close list add bezi control point handle f index 2 index 0 || f is close i index 0 ? f get node count 1 index 1 v f get node i v mask bezi path c2 m a s k 0 list add bezi control point handle f i 2 index f get node count 2 || f is close i index f get node count 1 ? 0 index + 1 v f get node i v mask bezi path c1 m a s k 0 list add bezi control point handle f i 1 list 