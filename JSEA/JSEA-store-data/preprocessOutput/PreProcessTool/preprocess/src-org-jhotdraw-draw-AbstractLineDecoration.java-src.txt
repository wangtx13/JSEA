# line decoration 2 0 2006 01 14 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? org jhotdraw draw io geom org jhotdraw geom geom org jhotdraw org jhotdraw draw attribute key an standard of a line decoration it draw a shape which is rotate and move to the end of the line the shape is scale by the stroke width author wern randelshof 2 0 2006 01 14 change to support coordinate 1 0 2003 12 01 derive from jhotdraw 5 4b1 line decoration line decoration is the decoration is fill is fill is the decoration is stroke is stroke is the stroke color is use to fill the decoration is solid construct an arrow tip with the given angle and radius line decoration is fill is stroke is solid is fill is fill is stroke is stroke is solid is solid is fill is fill is stroke is stroke is solid is solid draw the arrow tip in the direction specify by the given two point template draw graphics2 d g figure f point2 d p1 point2 d p2 general path path get transform decorator path f p1 p2 color color is fill is solid color s t r o k e c o l o r get f color f i l l c o l o r get f color g set color color g fill path is stroke color s t r o k e c o l o r get f color g set color color g set stroke attribute key get stroke f g draw path the drawing bound of the decorator rectangle2 d get draw bound figure f point2 d p1 point2 d p2 general path path get transform decorator path f p1 p2 rectangle2 d b path get bounds2 d rectangle2 d bound rectangle2 d b get x b get y b get width b get height is stroke stroke width s t r o k e w t h get f stroke join s t r o k e j o i n get f miter limit s t r o k e m i t e r l i m i t f a c t o r get f stroke width grow stroke join basic stroke j o i n m i t e r grow 1 + stroke width 2 miter limit grow 1 + stroke width 2 geom grow bound grow grow bound get decoration radius figure f stroke width s t r o k e w t h get f scale factor stroke width 1f scale factor 1d + stroke width 1d 2d scale factor 1d get decorator path radius f scale factor general path get transform decorator path figure f point2 d p1 point2 d p2 general path path get decorator path f stroke width s t r o k e w t h get f affine transform transform affine transform transform translate p1 x p1 y transform rotate math atan2 p1 x p2 x p2 y p1 y transform rotate math p i 2 stroke width 1f transform scale 1d + stroke width 1d 2d 1d + stroke width 1d 2d path transform transform path set fill b is fill b set stroke b is stroke b set solid b is solid b hook to calculate the path of the decorator general path get decorator path figure f hook to calculate the radius of the decorator path get decorator path radius figure f 