content reader nano xml $ revision 1 4 $ $ date 2002 01 04 21 03 28 $ $ r e l e s e 2 2 1 $ thi nano xml 2 2000 2002 scheemaeck right reserve thi provide imply hold damage arise thi grant thi purpose include application restriction 1 thi misrepresent write thi appreciate require 2 mark misrepresent 3 thi remove net n3 io reader io i o thi reader read data another reader until element ha encounter scheemaeck $ r e l e s e 2 2 1 $ $ revision 1 4 $ content reader extend reader encapsulate reader i xml reader reader buffer buffer pointer buffer buffer index entity resolv i xml entity resolv resolv create reader reader encapsulate reader resolv entity resolv buffer data ha already read reader content reader i xml reader reader i xml entity resolv resolv buffer thi reader reader thi resolv resolv thi buffer buffer thi buffer index 0 clean up when s destroy protect finalize throwable thi reader thi resolv thi buffer finalize read block data output buffer where put read data offset first position buffer put data size maximum number read number read 1 at e o f io i o occur reading data read output buffer offset size i o read 0 buffer length thi buffer length offset + size output buffer length size output buffer length offset read size str ch thi buffer index buffer length str xml read thi reader ch str at 0 ch thi buffer at thi buffer index thi buffer index++ output buffer read ch read++ t interprete buffer ch thi reader unread ch ch str length 1 str at 1 # ch xml process literal str xml process entity str thi reader thi resolv output buffer read ch read++ read 0 read 1 read xml parse e i o e get message skip remain data close stream io i o occur reading data close i o buffer length thi buffer length str ch thi buffer index buffer length str xml read thi reader ch str at 0 ch thi buffer at thi buffer index thi buffer index++ t interprete buffer ch thi reader unread ch ch str length 1 str at 1 # xml process entity str thi reader thi resolv xml parse e i o e get message 