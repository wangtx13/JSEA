# figure 3 3 2006 06 17 1996 2006 contributor right reserve thi disclose accordance term enter draw font geom undo io geom figure provide functionality manage listener figure wern randelshof 3 3 rework 3 2 2006 01 05 add get change depth 3 0 2006 01 20 rework j2 s e 1 5 1 0 2003 12 01 derive 5 4b1 figure implement figure protect listener list listener list listener list connector visible connection figure courting connection interactive visible protect figure decorator draw decorator first we increase thi number on each invocation change decrease on each invocation change protect change depth 0 create instance figure d r i n g s h p e n d b o u n d s t t r i b u t e s e d i t i n g o n n e t i n g o m p o s i t e f i g u r e s l o n i n g e v e n t h n d l i n g add figure listener figure listener l listener list add figure listener l remove figure listener figure listener l listener list remove figure listener l add undoable edit listener undoable edit listener l listener list add undoable edit listener l remove undoable edit listener undoable edit listener l listener list remove undoable edit listener l add notify d thi d fire figure add remove notify d fire figure remove thi protect get protect get lock get ? thi get get lock set draw decorator first value draw decorator first value draw decorator first draw decorator first notify listener list have register interest notification on thi type fire area invalidate fire area invalidate get draw bound notify listener list have register interest notification on thi type protect fire area invalidate rectangle2 d invalidate area listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi invalidate area figure listener listener i+1 figure area invalidate notify listener list have register interest notification on thi type protect fire figure request remove listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi get bound figure listener listener i+1 figure request remove notify listener list have register interest notification on thi type protect fire figure add listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi get bound figure listener listener i+1 figure add notify listener list have register interest notification on thi type protect fire figure remove listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi get bound figure listener listener i+1 figure remove fire figure change fire figure change get bound notify listener list have register interest notification on thi type protect fire figure change rectangle2 d change area listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi change area figure listener listener i+1 figure change protect fire figure change figure listener list get listener count 0 notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure listener listener i+1 figure change notify listener list have register interest notification on thi type protect fire attribute change attribute key attribute old value value listener list get listener count 0 figure notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 listener i figure listener lazily create figure thi attribute old value value figure listener listener i+1 figure attribute change notify listener list have register interest notification on thi type protect fire undoable edit happen undoable edit edit undoable edit listener list get listener count 0 notify listener have register interest guarantee non listener listener list get listener list process listener last first notify those are interest thi i listener length 2 i 0 i 2 undoable edit thi edit listener i undoable edit listener undoable edit listener listener i+1 undoable edit happen set create handle hash set figure clone figure figure clone listener list listener list connector visible courting connection thi decorator decorator figure thi decorator clone clone support e internal internal e get message init cause e figure basic clone hash map figure figure old x x x delete me remap hash map figure figure old collection handle create handle detail level link list handle handle link list handle detail level 0 box handle kit add box handle thi handle handle cursor get cursor point2 d p contain p cursor get predefin cursor cursor h n d u r s o r cursor get cursor set bound rectangle2 d bound set bound point2 d bound x bound y point2 d bound x + bound width bound y + bound height set bound point2 d anchor point2 d point2 d old anchor get start point point2 d old get end point old anchor equal anchor || old equal change basic set bound anchor change fire undoable edit happen set bound edit thi old anchor old anchor check thi figure connect figure connect connect inform figure need redrawn invalidate fire area invalidate get draw bound protect change change depth 0 protect get change depth change depth inform figure about change someth affect content display box change change depth++ invalidate protect validate inform figure change area display box change change depth 1 validate fire figure change get draw bound change depth 0 change depth transform geometry figure transform affine transform tx change basic transform tx fire undoable edit happen transform edit thi tx change move figure thi subclass override p thi basic operation which are fire basic transform affine transform ty figure connector specify location chop box connector see chop box connector connector find connector point2 d p connection figure prototype chop box connector thi include figure figure figure thi figure find figure inside point2 d p contain p ? thi connector find compatible connector connector start chop box connector thi collection action which are present user popup menu p collection contain entry these entry are interpret separator popup menu collection action get action point2 d p collection empty list specialize tool given coordinate p specialize tool available tool get tool point2 d p handle mouse click handle mouse click point2 d p mouse evt view view handle drop point2 d p collection figure drop figure view view point2 d get end point rectangle2 d r get bound point2 d r x + r width r y + r height point2 d get start point rectangle2 d r get bound point2 d r x r y rectangle2 d get hit bound get bound dimension2 d get prefer size rectangle2 d r get bound dimension2 d r width r height remap map old interactive interactive set interactive b interactive b visible visible set visible value value visible change visible value change set connector visible visible connection figure connection change connector visible visible courting connection connection change connector visible connector visible protect connection figure get courting connection courting connection collection figure get decomposition link list figure list link list figure list add thi list protect font render context get font render context font render context frc frc frc font render context affine transform option text antialias option fractional metric frc request remove fire figure request remove get layer 0 get tooltip point2 d p set decorator figure value change decorator value decorator decorator basic set bound get start point get end point change figure get decorator decorator draw graphics2 d g draw decorator first draw decorator g draw figure g draw figure g draw decorator g protect draw figure graphics2 d g protect draw decorator graphics2 d g decorator update decorator bound decorator draw g protect update decorator bound decorator point2 d sp get start point point2 d ep get end point insets2 d decorator inset attribute key d e o r t o r i n s e t s get thi sp x decorator inset left sp y decorator inset top ep x + decorator inset right ep y + decorator inset bottom decorator basic set bound sp ep rectangle2 d get draw bound rectangle2 d figure draw bound get figure draw bound decorator update decorator bound figure draw bound add decorator get draw bound figure draw bound protect rectangle2 d get figure draw bound builder buf builder buf append get get substring get get last index +1 buf append buf append hash buf 