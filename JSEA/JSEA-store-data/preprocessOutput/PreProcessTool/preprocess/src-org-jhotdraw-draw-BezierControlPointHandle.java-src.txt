# bezi control point handle 1 0 23 januar 2006 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw draw org jhotdraw org jhotdraw undo event geom org jhotdraw geom bezi control point handle author wern randelshof 1 0 23 januar 2006 create bezi control point handle handle index control point index composite edit edit create a instance bezi control point handle bezi figure owner index coord owner index index control point index coord bezi figure get bezi figure bezi figure get owner point get location get bezi figure get point count index ? view drawing to view get bezi figure get point index control point index point 10 10 draw handle draw graphics2 d g bezi figure f get bezi figure f get point count index bezi path node v f get node index v keep colinear v mask bezi path c1 c2 m a s k index 0 index f get node count || f is close draw circle g color white color blue draw circle g color blue color white g set color color blue g draw line2 d view drawing to view point2 d v x 0 v y 0 view drawing to view point2 d v x control point index v y control point index rectangle basic get bound rectangle r rectangle get location r grow get handlesize 2 get handlesize 2 r track start point anchor modifier ex view get drawing fire undoable edit happen edit composite edit punkt verschieben point2 d location view get constrain constrain point view view to drawing get location point2 d p view get constrain constrain point view view to drawing anchor track step point anchor point modifier ex bezi figure figure get bezi figure point2 d p view get constrain constrain point view view to drawing bezi path node v figure get node index fire area invalidate v figure will change v keep colinear move control point independently figure basic set point index control point index p move control point and opposite control point on same line a math p i + math atan2 p y v y 0 p x v x 0 c2 control point index 1 ? 2 1 r math sqrt v x c2 v x 0 v x c2 v x 0 + v y c2 v y 0 v y c2 v y 0 sina math sin a cosa math co a point2 d p2 point2 d r cosa + v x 0 r sina + v y 0 figure basic set point index control point index p figure basic set point index c2 p2 figure change fire area invalidate figure get node index fire area invalidate bezi path node v rectangle2 d dr rectangle2 d v x 0 v y 0 0 0 i 1 i 3 i++ dr add v x i v y i rectangle vr view drawing to view dr vr grow get handlesize get handlesize fire area invalidate vr track end point anchor point modifier ex bezi figure figure get bezi figure modifier ex input event m e t a d o w n m a s k | input event c t r l d o w n m a s k 0 figure will change bezi path node v figure get node index v keep colinear v keep colinear v keep colinear move control point and opposite control point on same line point2 d p figure get point index control point index a math p i + math atan2 p y v y 0 p x v x 0 c2 control point index 1 ? 2 1 r math sqrt v x c2 v x 0 v x c2 v x 0 + v y c2 v y 0 v y c2 v y 0 sina math sin a cosa math co a point2 d p2 point2 d r cosa + v x 0 r sina + v y 0 v x c2 p2 x v y c2 p2 y figure set node index v figure change view get drawing fire undoable edit happen edit is combinable with handle h is combinable with h bezi control point handle that bezi control point handle h that index index that control point index control point index that get bezi figure get node count get bezi figure get node count 