# generic listener 1 1 2003 11 03 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw draw action reflect the generic listener create anonymou listener class at runtime p usage pre demo j panel root j panel border layout j label label j label my button action action event e label set text button action my mouse enter mouse event e label set text mouse enter +e to demo j button button j button button with dynamic listener listener will be generate at run time i e at run time an action listener will be generate and then load only one of these is actually create even many call to generic listener create action listener are make action listener action listener action listener generic listener create action listener action perform my button action button add action listener action listener here s another dynamically generate listener one is a little different because the listener argument actually specifie one of many listener in the previou example action perform name the one and only action listener mouse listener mouse listener mouse listener generic listener create mouse listener mouse enter my mouse enter button add mouse listener mouse listener pre author wern randelshof 1 1 2003 11 03 support parameterles target add 1 0 2003 11 02 create generic listener a convenient of create listener target target look up the listener and target so you t have to create listener listener name target target name listener get listener listener listener name search a target with the same parameter type a the listener target get target target target name listener get parameter type nothing found? search a target with no target target get target target target name 0 still nothing found? we give up target runtime no such +target name+ in +target get create listener target target an instance of a that the that contain the declaration listener in listener will apply target target to the incoming event create listener target target the of the create us the dynamic proxy a p i introduce in j d k 1 3 create an instance of the invok and override the to handle the invoke the target on the target invocation handler handler invok proxy throwable send all except the target to the superclass handling listener equal target get parameter type length 0 special treatment parameterles target target target 0 regular treatment target have the same argument list a the listener target target proxy cl listener get declare loader cl cl get loader proxy proxy instance cl cl handler of the invocation handler which handle the basic invok invocation handler proxy throwable get declare name get name name equal hash proxy hash proxy name equal equal proxy equal proxy 0 name equal to proxy to proxy although listener are suppose to be we allow any type here and produce 0 a appropriate value of get type proxy hash proxy identity hash proxy proxy equal proxy other proxy other ? t r u e f a l s e proxy to proxy proxy get get name + + to hex proxy hash character 0 character 0 0 0 value of rt rt is primitive rt rt f a l s e rt 0 will convert to any other kind of number 0 helper e z of create get listener listener listener name given the argument to create find out which listener is desire m listener get result i 0 i m length i++ listener name equal m i get name result runtime ambiguou +m i + v +result result m i result runtime no such +listen name+ in +listen result get target target target name parameter type m target get get result each i 0 i m length i++ target name equal m i get name each p m i get parameter type p length parameter type length each j 0 j p length j++ p j is assignable from parameter type j each result runtime ambiguou +m i + v +result result m i result runtime no such +target name+ in +target get result result raise to result result result result result raise to m c m get declare modifier is m get modifier modifier is c get modifier m yes search a which m sc c get superclass sc sm raise to m sc sm sm int c get i 0 i int length i++ im raise to m int i im im no of m here raise to m c sm c get m get name m get parameter type raise to sm no such ee generic listener 