# quad tree 2 0 2006 01 14 1996 2006 it contributor disclose accordance ??? draw geom quad tree2 d reverse list geom quad tree us quad tree2 d improve responsiveness drawing which contain many figure author 2 0 2006 01 14 support precision coordinate 1 0 2003 12 01 derive 5 4b1 quad tree drawingimplement figure listener undoable edit listener list figure figure list figure quad tree2 d figure quad tree quad tree2 d figure need sorting create instance quad tree index figure figure figure index figure basic add index figure figure figure add index figure quad tree add figure figure get draw bound figure add figure listener figure add undoable edit listener need sorting basic remove figure figure figure remove figure quad tree remove figure figure remove figure listener figure remove undoable edit listener need sorting draw graphics2 d g collection figure quad tree find intersect g get clip bound get bounds2 d collection figure draw sort draw g draw note sorting do orphan figure collection figure sort collection figure ensure sort list figure sort list figure size figure f figure contain f sort add f sort draw graphics2 d g collection figure figure f f draw g figure area invalidate figure e fire area invalidate e get invalidate area figure figure e quad tree remove e get figure quad tree add e get figure e get figure get draw bound need sorting fire area invalidate e get invalidate area figure figure e figure figure e figure request remove figure e remove e get figure collection figure get figure rectangle2 d bound quad tree find inside bound collection figure get figure unmodifiable collection figure figure find figure inside point2 d p collection figure quad tree find contain p figure f get figure front back contain f f contain p f find figure inside p iterator iterate z order front back over figure list figure get figure front back ensure sort reverse list figure figure figure find figure point2 d p collection figure quad tree find contain p size 0 1 figure f iterator next f contain p ? f figure f get figure front back contain f f contain p f figure find figure except point2 d p figure ignore collection figure quad tree find contain p size 0 1 figure f iterator next f ignore || f contain p ? f figure f get figure front back f ignore f contain p f figure find figure except point2 d p collection ignore collection figure quad tree find contain p size 0 1 figure f iterator next ignore contain f || f contain p ? f figure f get figure front back ignore contain f f contain p f collection figure find figure rectangle2 d r collection figure quad tree find intersect r size 0 fall through 1 sort collection figure find figure within rectangle2 d r collection figure find figure r list figure result list figure size figure f r contain f get bound result add f result bring front figure figure figure remove figure figure add figure need sorting fire area invalidate figure get draw bound send back figure figure figure remove figure figure add 0 figure need sorting fire area invalidate figure get draw bound we propagate edit event our figure undoable edit listener which have register u undoable edit happen undoable edit e fire undoable edit happen e get edit figure attribute figure e contain figure f figure contain f ensure figure are sort z order sequence ensure sort need sorting sort figure figure layer comparator i n s t n e need sorting 