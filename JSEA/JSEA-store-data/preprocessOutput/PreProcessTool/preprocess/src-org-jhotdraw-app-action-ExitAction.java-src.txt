# exit action 1 0 04 january 2005 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw app action org jhotdraw gui org jhotdraw gui event org jhotdraw event io org jhotdraw app application org jhotdraw app project exit the application after letting the user save or close unsav project author wern randelshof 1 0 04 january 2005 create exit action application action exit component old focus owner project unsav project create a instance exit action application app app resource bundle label resource bundle get l a f bundle org jhotdraw app label label configure action action perform action event evt application app get application app is enable app set enable unsav project count 0 project document to be review project p app project p ha unsav change p is enable document to be review p unsav project count++ unsav project count 0 document to be review silently abort no project can be review app set enable unsav project count 0 exit 1 unsav project document to be review old focus owner utility get window ancestor unsav project get component get focus owner unsav project set enable j option pane pane j option pane html + u i manager get option pane cs + b you want to save change to document + before exiting? b p + you t save your change will be lost j option pane w a r n i n g m e s s a g e option save cancel t save pane set option option pane set initial value option 0 pane put client property quaqua option pane destructive option 2 j sheet show sheet pane unsav project get component sheet listener option select sheet event evt value evt get value value || value equal cancel unsav project set enable app set enable value equal t save exit unsav project set enable value equal save save change j option pane pane j option pane html + u i manager get option pane cs + b you have +unsav project count+ document with unsav change + you want to + review these change before quitting? b p + you t review your document + all your change will be lost j option pane q u e s t i o n m e s s a g e option review change cancel discard change pane set option option pane set initial value option 0 pane put client property quaqua option pane destructive option 2 j dialog dialog pane create dialog app get component dialog set visible value pane get value value || value equal cancel app set enable value equal discard change exit app set enable value equal review change unsav project document to be review review change save change unsav project get j chooser chooser unsav project get save chooser option chooser show save dialog j sheet show save sheet chooser unsav project get component sheet listener option select sheet event evt evt get option j chooser a p p r o v e o p t i o n evt get chooser get select save to unsav project set enable old focus owner old focus owner request focus get application set enable save to unsav project get review change unsav project is enable old focus owner utility get window ancestor unsav project get component get focus owner unsav project set enable j option pane pane j option pane html + u i manager get option pane cs + b you want to save change to document + before exiting? b p + you t save your change will be lost j option pane w a r n i n g m e s s a g e option save cancel t save pane set option option pane set initial value option 0 pane put client property quaqua option pane destructive option 2 j sheet show sheet pane unsav project get component sheet listener option select sheet event evt value evt get value value || value equal cancel unsav project set enable get application set enable value equal t save get application dispose unsav project review next value equal save save change and review next get application set enable out review silently abort save change and review next unsav project get j chooser chooser unsav project get save chooser option chooser show save dialog j sheet show save sheet chooser unsav project get component sheet listener option select sheet event evt evt get option j chooser a p p r o v e o p t i o n evt get chooser get select save to and review next unsav project set enable old focus owner old focus owner request focus get application set enable save to and review next unsav project get review next unsav project count 0 project document to be review project p get application project p ha unsav change p is enable document to be review p unsav project count++ unsav project count 0 exit document to be review unsav project document to be review review change get application set enable out exit silently abort save to unsav project execute worker construct unsav project write i o e e finish value save unsav project value save to and review next unsav project execute worker construct unsav project write i o e e finish value save and review next unsav project value save project unsav project value value unsav project set exit j sheet show message sheet unsav project get component html + u i manager get option pane cs + b couldn t save to the \ +file+ \ p + reason +value j option pane e r r o r m e s s a g e unsav project set enable old focus owner old focus owner request focus get application set enable save and review next project unsav project value value unsav project set get application dispose unsav project review next j sheet show message sheet unsav project get component html + u i manager get option pane cs + b couldn t save to the \ +file+ \ p + reason +value j option pane e r r o r m e s s a g e unsav project set enable old focus owner old focus owner request focus get application set enable exit get application stop exit 0 