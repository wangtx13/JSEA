# connector 2 1 2006 06 05 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org ??? org jhotdraw draw io i o org jhotdraw geom org jhotdraw geom org jhotdraw xml dom input org jhotdraw xml dom output connector provide the connector see connector author wern randelshof 2 1 2006 06 05 support connection to decorator 2 0 2006 01 14 change to support doubl precision coordinate 1 0 2003 12 01 derive from jhotdraw 5 4b1 connector connector the owner of the connector figure owner wheth we should connect to the figure or to it decorator is connect to decorator wheth we are visible is visible wheth the state of connector is persistent set to only when the user allow to change the state of the connector is state persistent construct a connector that ha no owner it is only use internally to resurrect a connector from a storable output it should nev be call directly connector owner construct a connector with the given owner figure connector figure owner owner owner set connect to decorator value is connect to decorator value is connect to decorator is connect to decorator set visible value is visible value is visible is visible figure get connector target figure f is connect to decorator f get decorator ? f get decorator f test a point is contain in the connector contain point2 d p get owner contain p draw connector by connector are invisible draw graphics2 d g is visible rectangle2 d bound get bound ellipse2 d circle ellipse2 d bound x + bound width 2 3 bound y + bound height 2 3 6 6 g set color color blue g fill circle point2 d find start connection figure connection find point connection point2 d find end connection figure connection find point connection get the connection point override when the connector doe not need to distinguish between the start and end point of a connection point2 d find point connection figure connection geom center get bound rectangle2 d get bound get owner get bound get the connector s owner figure get owner owner set the connector s owner set owner figure value owner value clone connector that connector clone that clone not support e internal internal e to init cause e require j d k 1 4 is call when the start location of the connection ha be move by the user the user ha probably do to adjust the layout the connector may use a a hint to improve the result the next call to find end update start location point2 d p is call when the end location of the connection ha be move by the user the user ha probably do to adjust the layout the connector may use a a hint to improve the result the next call to find start update end location point2 d p point2 d get anchor geom center get bound update anchor point2 d p read dom input in i o is state persistent is connect to decorator in get attribute connect to decorator is visible in get attribute visible in open element owner owner figure in read 0 in close element write dom output out i o is state persistent is connect to decorator out add attribute connect to decorator is visible out add attribute visible out open element owner out write get owner out close element 