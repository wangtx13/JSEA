# grid constrain 2 1 1 2006 07 05 copyright c 1996 2006 by the original author of jhotdraw and all it contributor jhotdraw org all right reserve software is the confidential and proprietary information of jhotdraw org confidential information you shall not disclose such confidential information and shall use it only in accordance with the term of the license agreement you enter into with jhotdraw org org jhotdraw draw geom constrain a point such that it fall on a grid author wern randelshof 2 1 1 2006 07 05 fix drawing bug 2 1 2006 07 03 is visible add 2 0 2006 01 14 change to support precision coordinate 1 0 2004 03 17 create grid constrain constrain width height color minor color color 0xebebeb color major color color 0xcacaca create a instance width the width of a grid cell height the height of a grid cell grid constrain width height width 0 || height 0 illegal argument width or height is 0 width width height height get width width get height height point2 d constrain point point2 d p f i x m e work only width p x math round p x width width p y math round p y height height p to to + +width+ +height+ is visible width 1 height 1 draw graphics2 d g drawing view view is visible affine transform t view get drawing to view transform rectangle view bound g get clip bound rectangle2 d bound view view to drawing view bound point2 d origin constrain point point2 d bound x bound y point2 d point point2 d point2 d view point point2 d width view get scale factor 1 g set color minor color i origin x width m origin x + bound width width + 1 i m i++ g set color i % 5 0 ? major color minor color point x width i t transform point view point g draw line view point x view bound y view point x view bound y + view bound height height view get scale factor 1 g set color minor color i origin y height m origin y + bound height height + 1 i m i++ g set color i % 5 0 ? major color minor color point y height i t transform point view point g draw line view bound x view point y view bound x + view bound width view point y 