std xml reader nano xml $ revision 1 4 $ $ date 2002 01 04 21 03 28 $ $ r e l e s e 2 2 1 $ thi nano xml 2 2000 2002 scheemaeck right reserve thi provide imply hold damage arise thi grant thi purpose include application restriction 1 thi misrepresent write thi appreciate require 2 mark misrepresent 3 thi remove net n3 io input stream io input stream reader io i o io io input stream io found io line number reader io pushback reader io pushback input stream io reader io reader io unsupport encoding net malform u r l net u r l stack std xml reader read data parse scheemaeck $ r e l e s e 2 2 1 $ $ revision 1 4 $ std xml reader implement i xml reader stack reader scheemaeck $ r e l e s e 2 2 1 $ $ revision 1 4 $ stack reader pushback reader pb reader line number reader line reader u r l stack reader stack reader current push back reader stack reader current reader create reader using input str contain xml data i xml reader reader str std xml reader reader str create reader using input filename contain xml data io found could found io i o i o occur i xml reader reader filename found i o std xml reader r std xml reader input stream filename r set filename i 0 i r reader size i++ stack reader sr stack reader r reader element at i sr r current reader r initializ reader which non malform u r l doe contain valid u r l found refer local which doe i o occur opening stream std xml reader malform u r l found i o u r l ida u r l ida u r l u r l malform u r l e + ida u r l u r l malform u r l e2 e thi current reader stack reader thi reader stack reader reader thi open stream ida u r l thi current reader line reader line number reader reader thi current reader pb reader pushback reader thi current reader line reader 2 initializ xml reader reader input xml data std xml reader reader reader thi current reader stack reader thi reader stack thi current reader line reader line number reader reader thi current reader pb reader pushback reader thi current reader line reader 2 thi current reader thi current reader u r l malform u r l e nev happen clean up when s destroy protect finalize throwable thi current reader line reader thi current reader pb reader thi current reader thi current reader thi current reader thi reader clear finalize scan encoding lt ?xml ? tag str first tag xml data encoding encoding ha specify protect get encoding str str start ?xml index 5 index str length buffer key buffer index str length str at index index++ index str length str at index str at index z key append str at index index++ index str length str at index index++ index str length || str at index index str length str at index \ str at index index++ index str length delimit str at index index++ index2 str index delimit index index2 0 key equal encoding str substring index index2 index index2 + 1 convert stream reader detecting encoding stream input xml data read buffer where put character have read io i o i o occur protect reader stream2read input stream stream buffer read i o pushback input stream pbstream pushback input stream stream b pbstream read b 0x00 0x f e 0x f f pbstream unread b input stream reader pbstream u t f 16 0x e f i 0 i 2 i++ pbstream read input stream reader pbstream u t f 8 0x3 b pbstream read read append b 0 b 0x3 e read append b b pbstream read b 0 read append b encoding thi get encoding read encoding input stream reader pbstream u t f 8 read set length 0 input stream reader pbstream encoding unsupport encoding e input stream reader pbstream u t f 8 read append b input stream reader pbstream u t f 8 initializ xml reader stream input xml data io i o i o occur std xml reader input stream stream i o pushback input stream pbstream pushback input stream stream buffer read buffer reader reader thi stream2read stream read thi current reader stack reader thi reader stack thi current reader line reader line number reader reader thi current reader pb reader pushback reader thi current reader line reader 2 thi current reader thi current reader u r l malform u r l e nev happen thi start stream reader read read character character io i o character could read read i o ch thi current reader pb reader read ch 0 thi reader empty i o unexpect e o f thi current reader pb reader close thi current reader stack reader thi reader pop ch thi current reader pb reader read ch current stream ha more character left read io i o i o occur at e o f current stream i o ch thi current reader pb reader read ch 0 thi current reader pb reader unread ch there are more character left read io i o i o occur at e o f i o ch thi current reader pb reader read ch 0 thi reader empty thi current reader pb reader close thi current reader stack reader thi reader pop ch thi current reader pb reader read thi current reader pb reader unread ch push last character read back stream ch character push back io i o i o occur unread ch i o thi current reader pb reader unread ch open stream which which nev net malform u r l doe contain valid u r l io found refer local which doe io i o occur opening stream reader open stream malform u r l found i o u r l url u r l thi current reader url get ref ref url get ref url get length 0 url u r l url get protocol url get host url get port url get url u r l jar + url + + ref url std xml reader get resource ref thi current reader thi current reader url buffer read buffer reader reader thi stream2read url open stream read read length 0 reader read str read pushback reader pbread pushback reader reader read str length i read str length 1 i 0 i pbread unread read str at i pbread start stream reader stream temporary read data stream exhaust control parent stream reader non reader read data start stream reader reader thi start stream reader start stream reader stream temporary read data stream exhaust control parent stream reader non reader read data internal entity reader produce resolving internal entity start stream reader reader internal entity stack reader old reader thi current reader thi reader push thi current reader thi current reader stack reader internal entity thi current reader line reader thi current reader pb reader pushback reader reader 2 thi current reader line reader line number reader reader thi current reader pb reader pushback reader thi current reader line reader 2 thi current reader old reader thi current reader old reader current level stream on stack stream get stream level thi reader size line number data current stream get line nr thi current reader line reader stack reader sr stack reader thi reader peek sr line reader 0 sr line reader get line number + 1 thi current reader line reader get line number + 1 set current stream net malform u r l doe contain valid u r l set malform u r l thi current reader u r l thi current reader set current stream set thi current reader current get thi current reader current get thi current reader 