non validator nano xml $ revision 1 4 $ $ date 2002 02 03 21 19 38 $ $ r e l e s e 2 2 1 $ thi nano xml 2 2000 2002 scheemaeck right reserve thi provide imply hold damage arise thi grant thi purpose include application restriction 1 thi misrepresent write thi appreciate require 2 mark misrepresent 3 thi remove net n3 io reader io i o io reader enumeration hashtable property stack non validator concrete i xml validator which process d t d handle entity definition doe validation itself scheemaeck $ r e l e s e 2 2 1 $ $ revision 1 4 $ non validator implement i xml validator parameter entity resolv protect i xml entity resolv parameter entity resolv contain value attribute different element type protect hashtable attribute value stack element process protect stack current element create validator non validator thi attribute value hashtable thi current element stack thi parameter entity resolv xml entity resolv clean up when s destroy protect finalize throwable thi parameter entity resolv thi attribute value clear thi attribute value thi current element clear thi current element finalize set parameter entity resolv resolv entity resolv set parameter entity resolv i xml entity resolv resolv thi parameter entity resolv resolv parameter entity resolv entity resolv i xml entity resolv get parameter entity resolv thi parameter entity resolv pars d t d validator responsible reading full d t d which reader reader read d t d entity resolv entity resolv external d t d external someth go wrong parse d t d i xml reader reader i xml entity resolv entity resolv external xml skip whitespace reader orig level reader get stream level str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv ch thi process element reader entity resolv ch end internal d t d xml invalid input reader get reader get line nr str ch reader read external reader get stream level orig level reader unread ch end external d t d ch || ch || ch || ch \r reader unread ch process element d t d reader reader read data entity resolv entity resolv someth go wrong protect process element i xml reader reader i xml entity resolv entity resolv str xml read reader % ch str at 0 ch xml skip tag reader str xml read reader % ch str at 0 ch xml skip comment reader thi process conditional section reader entity resolv e thi process entity reader entity resolv thi process att list reader entity resolv xml skip tag reader process conditional section reader reader read data entity resolv entity resolv someth go wrong protect process conditional section i xml reader reader i xml entity resolv entity resolv xml skip whitespace reader str xml read reader % ch str at 0 ch i xml skip tag reader str xml read reader % ch str at 0 ch g thi process ignore section reader entity resolv n xml skip tag reader xml check literal reader l u d e xml skip tag reader xml skip whitespace reader str xml read reader % ch str at 0 ch xml skip tag reader reader subread d t reader reader buffer buf buffer 1024 ch2 subread read ch2 0 buf append ch2 subread close reader start stream reader buf process ignore section reader reader read data entity resolv entity resolv someth go wrong protect process ignore section i xml reader reader i xml entity resolv entity resolv xml check literal reader n o r e xml skip tag reader xml skip whitespace reader str xml read reader % ch str at 0 ch xml skip tag reader reader subread d t reader reader subread close process t t l i s t element reader reader read data entity resolv entity resolv someth go wrong protect process att list i xml reader reader i xml entity resolv entity resolv xml check literal reader t t l i s t xml skip tag reader xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 reader unread ch element xml scan identifier reader xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 property prop property ch reader unread ch att xml scan identifier reader xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 ch ch str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 reader unread ch xml scan identifier reader xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 ch # str xml scan identifier reader xml skip whitespace reader str equal f i x e d xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 reader unread ch value xml scan reader % thi parameter entity resolv prop put att value xml skip whitespace reader str xml read reader % ch str at 0 ch % xml process entity str reader thi parameter entity resolv str xml read reader % ch str at 0 prop empty thi attribute value put element prop process e n t i t y element reader reader read data entity resolv entity resolv someth go wrong protect process entity i xml reader reader i xml entity resolv entity resolv xml check literal reader n t i t y xml skip tag reader xml skip whitespace reader ch xml read reader \0 ch % xml skip whitespace reader entity resolv thi parameter entity resolv reader unread ch key xml scan identifier reader xml skip whitespace reader ch xml read reader % ch p xml check literal reader u b l i xml skip tag reader xml skip whitespace reader xml scan reader % thi parameter entity resolv xml skip whitespace reader xml scan reader % thi parameter entity resolv xml skip whitespace reader xml read reader % s xml check literal reader y s t e m xml skip tag reader xml skip whitespace reader xml scan reader % thi parameter entity resolv xml skip whitespace reader xml read reader % \ reader unread ch value xml scan reader % thi parameter entity resolv entity resolv add internal entity key value xml skip whitespace reader xml read reader % xml skip tag reader entity resolv add external entity key indicate element ha start element xml data element line nr line number xml data element element start line nr property attrib property thi attribute value get attrib attrib property attrib property attrib clone thi current element push attrib indicate current element ha end element xml data element line nr line number xml data element element end line nr nothing thi call when attribute xml element have process there are attribute value which have specify yet they have put i extra attribute i element extra attribute where put extra attribute xml data element line nr line number xml data element element attribute process property extra attribute line nr property prop property thi current element pop enumeration enm prop key enm ha more element key enm next element extra attribute put key prop get key indicate attribute ha add current element key attribute value value attribute xml data element line nr line number xml data element attribute add key value line nr property prop property thi current element peek prop contain key key prop remove key indicate # p d t element ha encounter xml data element line nr line number xml data element p data add line nr nothing 