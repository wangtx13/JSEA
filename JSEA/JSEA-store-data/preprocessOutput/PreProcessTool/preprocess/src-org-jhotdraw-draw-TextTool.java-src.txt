# text tool 1 0 19 november 2003 1996 2006 contributor right reserve thi disclose accordance term enter ??? draw tool create edit text figure editing behavior implement overlay figure provide text floating text field p tool interaction once figure text holder click see text holder see floating text field wern randelshof 2 0 2006 01 14 change support coordinate 1 0 2003 12 01 derive 5 4b1 text tool extend creation tool implement action listener floating text field text field text holder typing target create instance text tool text holder prototype prototype create instance text tool figure prototype map attribute prototype attribute deactivate editor editor end edit deactivate editor press figure text holder edit otherwise text figure create mouse press mouse e text holder text holder figure press figure get find figure inside get view view point e get x e get y press figure text holder text holder text holder press figure get label text holder editable text holder text holder begin edit text holder typing target end edit fire tool mouse press e update view so create figure draw before floating text figure overlay note f damage should standard view when overlay figure draw because j text field cannot scroll view check damage text holder text holder get create figure begin edit text holder mouse drag mouse e protect begin edit text holder text holder text field text field floating text field text field add action listener thi text holder typing target typing target end edit text field create overlay get view text holder text field set bound get field bound text holder text holder get text text field request focus typing target text holder rectangle get field bound text holder figure rectangle box get view view figure get bound n figure get text column dimension d text field get prefer size n d width math box width d width rectangle box x 6 box y 4 d width d height rectangle box get view view figure get bound dimension d text field get prefer size 3 d width math box width d width inset inset text field get inset rectangle box x inset left box y inset top box width + inset left + inset right box height + inset top + inset bottom mouse release mouse evt create figure rectangle bound create figure get bound bound width 0 bound height 0 get remove create figure get view add selection create figure create figure get fire undoable edit happen creation edit fire tool protect end edit typing target typing target change text field get text length 0 typing target set text text field get text create figure get fire undoable edit happen creation edit create figure create figure get remove figure get add figure typing target set text nothing undo set undo activity typing target change typing target text field end overlay view check damage action perform action end edit fire tool 