# bezi scale handle 1 0 16 juni 2006 1996 2006 contributor right reserve thi disclose accordance term enter draw undo geom geom handle scale rotate bezi figure pressing alt key shift key manipulate handle restrict handle rotate bezi figure wern randelshof 1 0 16 juni 2006 create bezi scale handle extend handle point location restore data affine transform transform point2 d center start theta start length create instance bezi scale handle bezi figure owner owner combinable handle h draw thi handle draw graphics2 d g draw circle g color yellow color black protect rectangle basic get bound rectangle r rectangle get location r grow get handlesize 2 get handlesize 2 r point get location location location view view get location bezi figure get bezi figure bezi figure get owner point2 d get find nice place put handle need pick place overlap point handle internal polygon handlesize get handlesize one handlesize step away outermost toward center point2 d out get bezi figure get outermost point point2 d ctr get bezi figure get center len geom length out x out y ctr x ctr y len 0 best we do? point2 d out x handlesize 2 out y + handlesize 2 u handlesize len u 1 0 best we do? point2 d out x 3 + ctr x 4 out y 3 + ctr y 4 point2 d out x 1 0 u + ctr x u out y 1 0 u + ctr y u track start point anchor modifier ex location point anchor x anchor y restore data get bezi figure get restore data transform affine transform center get bezi figure get center point2 d anchor point view view anchor start theta geom angle center x center y anchor point x anchor point y start length geom length center x center y anchor point x anchor point y track step point anchor point modifier ex location point x y point2 d point view view step theta geom angle center x center y point x point y step length geom length center x center y point x point y scale factor modifier ex input l t d o n m s k | input s h i f t d o n m s k 0 ? 1d step length start length transform set identity transform translate center x center y transform scale scale factor scale factor transform rotate step theta start theta transform translate center x center y get owner change get owner restore restore data get owner basic transform transform get owner change scale rotate point anchor polygon polygon point p change center determine relative angle length point ctr center polygon anchor len geom length ctr x ctr y anchor x anchor y anchor len 0 0 len geom length ctr x ctr y p x p y ratio len anchor len anchor angle math atan2 anchor y ctr y anchor x ctr x angle math atan2 p y ctr y p x ctr x rotation angle anchor angle n polygon npoint x n y n i 0 i n ++i x polygon xpoint i y polygon ypoint i l geom length ctr x ctr y x y ratio math atan2 y ctr y x ctr x + rotation x i ctr x + l math co + 0 5 y i ctr y + l math sin + 0 5 set internal polygon polygon x y n change track end point anchor point modifier ex view get fire undoable edit happen restore data edit get owner restore data location 