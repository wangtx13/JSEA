2010 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e semi supervised constraints list bit set sum lattice semi supervised state label map types feature vector types feature vector sequence types instance types instance list g e constraint on probability self transitions in f s t author gregory druck self transition g e constraint g e constraint self trans prob num tokens expectation weight self trans prob probability self transition weight weight constraint in objective function self transition g e constraint self trans prob weight self trans prob = self trans prob weight = weight num tokens = 0 expectation = 0 self transition g e constraint self trans prob weight num tokens expectation self trans prob = self trans prob weight = weight num tokens = num tokens expectation = expectation g e constraint copy self transition g e constraint self trans prob weight num tokens expectation one state constraint set state label map state label map map no pre processing possible here pre process feature vector fv bit set pre process instance list data count number tokens bit set bit set = bit set data size bit set set 0 data size instance instance data feature vector sequence fvs = feature vector sequence instance get data num tokens += fvs size bit set get composite constraint feature value feature vector fv ip si1 si2 si1 == si2 weight self trans prob expectation weight 1 self trans prob num tokens expectation get value self trans ex = expectation num tokens self trans prob == 1 weight math log self trans ex self trans prob == 0 weight math log 1 self trans ex weight self trans prob math log self trans ex math log self trans prob + 1 self trans prob math log 1 self trans ex math log 1 self trans prob zero expectations expectation = 0 compute expectations list< sum lattice> lattices xis i = 0 i < lattices size i++ sum lattice lattice = lattices get i xis = lattice get xis num states = xis 0 length feature vector sequence fvs = feature vector sequence lattice get input ip = 0 ip < fvs size ++ip si = 0 si < num states si++ expectation += math exp xis ip si si err self transition expectation + expectation num tokens 