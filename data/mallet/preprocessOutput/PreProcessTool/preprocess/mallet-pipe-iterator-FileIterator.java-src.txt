2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e author andrew mc callum <a href= mailto >mccallum edu< a> pipe iterator list iterator net u r i regex io pipe pipe types alphabet types instance types label strings an iterator that generates instances from an initial directory or set directories iterator will recurse through sub directories each filename becomes data field an instance and result a user specified regular expression pattern applied to filename becomes target value instance <p> in document classification it that name in data field will be subsequently processed one or more pipes until it contains a feature vector pattern applied to name often used to extract a directory name that will be used label instance label kept in target field author andrew mc callum <a href= mailto >mccallum edu< a> iterator iterator< instance> filter filter list< file> iterator< file> sub iterator pattern target pattern set target slot to coming from 1st group pattern starting directories min index count prefix index special value that means to use directories i get path target name use label names directories specified in constructor optionally removing prefix all starting directories gdruck 08 09 10 generalize regular expressions to work windows filenames sep = \\ + separator pattern s t a r t i n g d i r e t o r i e s = pattern compile s t a r t i n g d i r e t o r i e s use label names first directory in filename pattern f i r s t d i r e t o r y = pattern compile sep+ ? ^ +sep+ +sep+ + use label name last directory in filename pattern l a s t d i r e t o r y = pattern compile +sep+ ^ +sep+ + +sep+ ^ +sep+ + was ^ ^ + use label names all directory names in filename pattern a l l d i r e t o r i e s = pattern compile ^ +sep+ ^ +sep+ + added fuchun peng list< file> get construct a iterator that will supply filenames within initial directories instances directories directories to collect files from filter implementing filter that will decide which names to accept may be target pattern regex pattern applied to filename whose first parenthesized group on matching taken to be target value generated instance pattern applied to directory matcher find then all instances will have target remove prefix that modifies behavior s t a r t i n g d i r e t o r i e s pattern removing prefix all initially specified directories leaving remainder each filename target value iterator directories filter filter pattern target pattern remove prefix starting directories = directories filter = filter min index = directories length = list< file> target pattern = target pattern i = 0 i < directories length i++ !directories i directory illegal argument directories i get absolute path + not a directory min index i = size fill directories i filter sub iterator = iterator count = 0 dir strings = directories length i = 0 i < directories length i++ dir strings i = directories i to remove prefix prefix index = strings prefix index dir strings print files out iterator i=0 i<file size i++ = get i out to iterator directories filter filter pattern target pattern directories filter target pattern iterate over files that pass filter test setting iterator directories pattern target pattern directories target pattern iterator directories pattern target pattern remove prefix directories target pattern remove prefix array2 sa ret = sa length i = 0 i < sa length i++ ret i = sa i ret iterator directories filter ff array2 directories ff iterator directories target pattern array2 directories pattern compile target pattern iterator directories pattern target pattern array2 directories target pattern iterator directories pattern target pattern remove prefix array2 directories target pattern remove prefix iterator directory filter filter pattern target pattern directory filter target pattern iterator directory filter filter pattern target pattern remove prefix directory filter target pattern remove prefix iterator directory filter filter directory filter iterator directory pattern target pattern directory target pattern iterator directory pattern target pattern remove prefix directory target pattern remove prefix iterator directory pattern target pattern directory target pattern iterator directory pattern target pattern remove prefix directory target pattern remove prefix iterator directory directory iterator directory directory iterator directory filter filter directory filter fill directory filter filter list< file> files count = 0 directory contents = directory list files i = 0 i < directory contents length i++ directory contents i directory count += fill directory contents i filter files filter == || filter accept directory contents i files add directory contents i count++ count pipe input iterator instance next next = sub iterator next path = next get absolute path target name = target pattern == s t a r t i n g d i r e t o r i e s i i = 0 i < min index length i++ min index i > count target name = starting directories i get path substring prefix index target pattern != matcher m = target pattern matcher path m find target name = m group 1 count++ instance next target name next to u r i remove illegal state iterator< instance> does not support remove culotta 9 11 03 next sub iterator next has next sub iterator has next 