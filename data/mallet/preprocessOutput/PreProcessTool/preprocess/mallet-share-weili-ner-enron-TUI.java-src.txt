2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e author wei <a href= mailto weili >weili edu< a> share weili ner enron junit framework iterator random regex io optimize pipe pipe iterator pipe tsf share upenn ner types t u i a p s = \\p lu l o w = \\p ll a p s n u m = \\p lu \\p nd a l p h a = \\p lu \\p ll a l p h a n u m = \\p lu \\p ll \\p nd p u n t = \\ ?! q u o t e = \ ` i o datadir = usr can tmp3 weili n e r enron data conlllexdir = usr col tmp1 weili resource conll dict idflexdir = usr col tmp1 weili resource idf dict placelexdir = usr col tmp1 weili resource places pipe conll lexicons pipe = serial pipes pipe trie lexicon membership conlllexdir + conll o n l l t w o p e r trie lexicon membership conlllexdir + conll o n l l t w o l o trie lexicon membership conlllexdir + conll o n l l t w o o r g trie lexicon membership conlllexdir + conll o n l l t w o m i s pipe google lexicons pipe = serial pipes pipe trie lexicon membership conlllexdir + googlesets o r g s o e r trie lexicon membership conlllexdir + googlesets o r g g o v t trie lexicon membership conlllexdir + googlesets o r g n g o trie lexicon membership conlllexdir + googlesets o r g m i l i t a r y trie lexicon membership conlllexdir + googlesets o r g o m p a n y trie lexicon membership conlllexdir + googlesets o r g b a n k trie lexicon membership conlllexdir + googlesets o r g t r a d e trie lexicon membership conlllexdir + googlesets o r g n e w s trie lexicon membership conlllexdir + googlesets o r g o p e r a t i n g s y s t e m trie lexicon membership conlllexdir + googlesets o r g p o l i t i a l p a r t y trie lexicon membership conlllexdir + googlesets o r g t r a v e l trie lexicon membership conlllexdir + googlesets o r g b a s e b a l l t e a m a u g f trie lexicon membership conlllexdir + googlesets o r g a r m o d e l trie lexicon membership conlllexdir + googlesets o r g a r o m p a n y trie lexicon membership conlllexdir + googlesets o r g e n g l i s h o u n t y a u g trie lexicon membership conlllexdir + googlesets o r g u n i v e r s i t y trie lexicon membership conlllexdir + googlesets m i s n a t i o n a l i t y a u g f trie lexicon membership conlllexdir + googlesets m i s d i s e a s e a u g trie lexicon membership conlllexdir + googlesets m i s t i m e trie lexicon membership conlllexdir + googlesets m i s a w a r d s trie lexicon membership conlllexdir + googlesets m i s m o v i e s a u g f trie lexicon membership conlllexdir + googlesets m i s p o l i t i a l p a r t y trie lexicon membership conlllexdir + googlesets m i s r e l i g i o n trie lexicon membership conlllexdir + googlesets m i s g o v t trie lexicon membership conlllexdir + googlesets m i s w a r trie lexicon membership conlllexdir + googlesets m i s u r r e n y trie lexicon membership conlllexdir + googlesets l o trie lexicon membership conlllexdir + googlesets p e r f l trie lexicon membership conlllexdir + googlesets m i s f trie lexicon membership conlllexdir + googlesets o r g f r a w e d i t e d s o r t e d pipe fixed lexicons pipe = serial pipes pipe lexicon membership f i r s t h i g h e s t conlllexdir + personname ssdi prfirsthighest lexicon membership f i r s t h i g h conlllexdir + personname ssdi prfirsthigh lexicon membership f i r s t m e d conlllexdir + personname ssdi prfirstmed lexicon membership f i r s t l o w conlllexdir + personname ssdi prfirstlow lexicon membership l a s t h i g h e s t conlllexdir + personname ssdi prlasthighest lexicon membership l a s t h i g h conlllexdir + personname ssdi prlasthigh lexicon membership l a s t m e d conlllexdir + personname ssdi prlastmed lexicon membership l a s t l o w conlllexdir + personname ssdi prlastlow lexicon membership h o n o r i f i conlllexdir + personname honorifics lexicon membership n a m e s u f f i x conlllexdir + personname namesuffixes lexicon membership n a m e p a r t i l e conlllexdir + personname name particles lexicon membership d a y conlllexdir + days lexicon membership m o n t h conlllexdir + months lexicon membership p l a e s u f f i x conlllexdir + place suffixes trie lexicon membership o u n t r y conlllexdir + countries trie lexicon membership o u n t r y a p i t a l conlllexdir + country capitals trie lexicon membership u s s t a t e conlllexdir + u s states trie lexicon membership o m p a n y n a m e conlllexdir + company names trie lexicon membership o m p a n y s u f f i x conlllexdir + company suffixes trie lexicon membership o n t i n e n t conlllexdir + continents lexicon membership s t o p w o r d conlllexdir + stopwords trie lexicon membership conlllexdir + biz yahoo o m p a n y n a m e a b b r e v trie lexicon membership conlllexdir + utexas u n i v e r s i t i e s pipe idf lexicons pipe = serial pipes pipe trie lexicon membership f d e s idflexdir + designator data trie lexicon membership f f i r idflexdir + firstnames data trie lexicon membership f l o idflexdir + locations data trie lexicon membership f n a t idflexdir + nations data trie lexicon membership f a b b idflexdir + non abbrevs data trie lexicon membership f o r g idflexdir + organization data trie lexicon membership f p e r idflexdir + person data pipe spelling features pipe = serial pipes pipe regex matches i n i t a p pattern compile a p s+ regex matches a p i t a l i z e d pattern compile a p s+ l o w+ regex matches a l l a p s pattern compile a p s+ + regex matches m i x e d a p s pattern compile a z a z + a z a za z regex matches o n t a i n s d i g i t s pattern compile 0 9 regex matches a l l d i g i t s pattern compile 0 9 + regex matches n u m e r i a l pattern compile 0 9 + \\ + 0 9\\ + regex matches m u l t o t s pattern compile \\ \\ + regex matches e n d s i n d o t pattern compile ^\\ + \\ regex matches o n t a i n s d a s h pattern compile a l p h a n u m+ + + a l p h a n u m+ regex matches a r o pattern compile a z a z\\ \\ a z\\ regex matches l o n e l y i n i t i a l pattern compile a p s+ \\ regex matches s i n g l e h a r pattern compile a l p h a regex matches a p l e t t e r pattern compile a z regex matches p u n pattern compile p u n t regex matches q u o t e pattern compile q u o t e serial pipes p = serial pipes pipe enron message2 token sequence original token text w= spelling features pipe n e pipes placelexdir conll lexicons pipe google lexicons pipe fixed lexicons pipe idf lexicons pipe offset conjunctions 1 1 print token sequence features token sequence2 feature vector sequence instance list ilist = instance list p ilist add thru pipe iterator datadir iterator s t a r t i n g d i r e t o r i e s random r = random 1 instance list ilists = ilist split r 0 8 0 2 alphabet targets = p get target alphabet out print state labels i = 0 i < targets size i++ out print + targets lookup i out out number features = +p get data alphabet size r f crf = r f p crf add states three quarter labels connected in ilists 0 r f trainer label likelihood crft = r f trainer label likelihood crf crft set gaussian prior variance 100 0 i = 0 i < crf num states i++ crf get state i set initial weight transducer i m p o s s i b l e w e i g h t crf get state o set initial weight 0 0 out training on +ilists 0 size + training instances multi segmentation evaluator eval = multi segmentation evaluator instance list ilists 0 ilists 1 train test b d a t e b t i m e b l o a t i o n b p e r s o n b o r g a n i z a t i o n b a r o n y m b p h o n e b m o n e y b p e r e n t i d a t e i t i m e i l o a t i o n i p e r s o n i o r g a n i z a t i o n i a r o n y m i p h o n e i m o n e y i p e r e n t 0 equals feature induction illegal state feature induction not yet supported crf train feature induction ilists 0 ilists 1 eval 99999 10 60 500 0 5 1 2 5 7 0 equals no feature induction crft train ilists 0 5 1 2 5 7 !crft train incremental ilists 0 eval evaluate crft crft get iteration % 5 == 0 viterbi writer 2 ilists 0 train ilists 1 test err feature induction or not? give me a choice exit 1 crf write 1 