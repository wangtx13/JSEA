cluster tui gnu trove t hash set io io input stream io output stream io input stream io output stream logging logger cluster clustering cluster clusterings cluster cluster utils pipe noop pipe pipe types alphabet types instance types instance list types label alphabet command option logger randoms in progresspublic clusterings2 clusterings logger logger = logger get logger clusterings2 clusterings get name command option set summary clusterings2 clusterings a tool to manipulate clusterings command option process clusterings2 clusterings clusterings clusterings = input stream iis = input stream input stream input value clusterings = clusterings iis read e err reading clusterings from + input value + + e e print stack trace logger info number clusterings= + clusterings size prune clusters based on size min cluster size value > 1 i = 0 i < clusterings size i++ clustering clustering = clusterings get i instance list old instances = clustering get instances alphabet alph = old instances get data alphabet label alphabet lalph = label alphabet old instances get target alphabet alph == alph = alphabet lalph == lalph = label alphabet pipe noop = noop alph lalph instance list instances = instance list noop j = 0 j < old instances size j++ label = clustering get label j instance instance = old instances get j clustering size label >= min cluster size value instances add noop pipe instance instance get data lalph lookup label label instance get name instance get source clusterings set i create smaller clustering instances output prefix value != output stream oos = output stream output stream output prefix value oos write clusterings oos close e logger warning writing clustering to + output prefix value + + e e print stack trace split into training testing training proportion value > 0 clusterings size > 1 illegal argument expect one clustering to train test split not + clusterings size clustering clustering = clusterings get 0 target train size = training proportion value clustering get num instances t hash set clusters sampled = t hash set randoms random = randoms 123 label alphabet lalph = label alphabet instance list training instances = instance list noop lalph training instances size < target train size cluster = random next clustering get num clusters !clusters sampled contains cluster clusters sampled add cluster instance list instances = clustering get cluster cluster i = 0 i < instances size i++ instance inst = instances get i training instances add instance inst get data lalph lookup label cluster inst get name inst get source training instances shuffle random clustering training clustering = create smaller clustering training instances instance list testing instances = instance list lalph i = 0 i < clustering get num clusters i++ !clusters sampled contains i instance list instances = clustering get cluster i j = 0 j < instances size j++ instance inst = instances get j testing instances add instance inst get data lalph lookup label i inst get name inst get source testing instances shuffle random clustering testing clustering = create smaller clustering testing instances logger info output prefix value + train + training clustering get num clusters + logger info output prefix value + test + testing clustering get num clusters + output prefix value != output stream oos = output stream output stream output prefix value + train oos write clusterings clustering training clustering oos close oos = output stream output stream output prefix value + test oos write clusterings clustering testing clustering oos close e logger warning writing clustering to + output prefix value + + e e print stack trace clustering create smaller clustering instance list instances clustering = cluster utils create singleton clustering instances cluster utils merge instances same label command option input = command option clusterings2 clusterings input f i l e n a m e text clusterings filename from which to read list instances command option output prefix = command option clusterings2 clusterings output prefix f i l e n a m e text clusterings filename prefix to write output suffices train and test appended command option min cluster size = command option clusterings2 clusterings min cluster size i n t e g e r 1 remove clusters fewer than many instances command option training proportion = command option clusterings2 clusterings training proportion d o u b l e 0 0 split into training and testing percentage instances reserved training 