pipe io i o io input stream io output stream iterator types instance types label sequence types token sequence token sequence2 token instances pipe token instance iterator iterator< instance> iterator< instance> source instance current instance = token sequence current token sequence current index token instance iterator iterator< instance> source source has next current instance = source next current token sequence = token sequence current instance get data current index = 0 instance next current index >= current token sequence size current instance = source next current token sequence = token sequence current instance get data instance ret = instance current token sequence get current index label sequence current instance get target get label at position current index current index++ ret has next current instance != current index < current token sequence size || source has next remove illegal state iterator does not support remove iterator< instance> iterator from iterator< instance> source token instance iterator source serialization serial u = 1 u r r e n t s e r i a l v e r s i o n = 0 write output stream out i o out write u r r e n t s e r i a l v e r s i o n read input stream in i o not found = in read 