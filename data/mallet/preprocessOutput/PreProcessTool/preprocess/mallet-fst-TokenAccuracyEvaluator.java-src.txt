2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e author andrew mc callum <a href= mailto >mccallum edu< a> hash map logging logger types instance types instance list types sequence logger evaluates a transducer model based on predictions individual tokens token accuracy evaluator transducer evaluator logger logger = logger get logger token accuracy evaluator get name hash map< double> accuracy = hash map< double> token accuracy evaluator instance list instance lists descriptions instance lists descriptions token accuracy evaluator instance list instance list1 description1 instance list instance list1 description1 token accuracy evaluator instance list instance list1 description1 instance list instance list2 description2 instance list instance list1 instance list2 description1 description2 token accuracy evaluator instance list instance list1 description1 instance list instance list2 description2 instance list instance list3 description3 instance list instance list1 instance list2 instance list3 description1 description2 description3 evaluate instance list transducer trainer trainer instance list instances description num correct tokens total tokens transducer transducer = trainer get transducer total tokens = num correct tokens = 0 i = 0 i < instances size i++ instance instance = instances get i sequence input = sequence instance get data sequence output = sequence instance get target input size == output size err token accuracy evaluator +i+ length= +input size sequence pred output = transducer transduce input pred output size == output size j = 0 j < output size j++ total tokens++ output get j equals pred output get j num correct tokens++ err token accuracy evaluator +i+ num correct tokens= +num correct tokens+ total tokens= +total tokens+ accuracy= + num correct tokens total tokens acc = num correct tokens total tokens err token accuracy evaluator accuracy= +acc accuracy put description acc logger info description + accuracy= +acc accuracy from last time test or evaluate was called get accuracy description ret = accuracy get description ret != ret value illegal argument no accuracy available instance list \ +description+ \ 