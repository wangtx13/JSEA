2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e pipe io types convert to amp convert to amp amp in tokens a token sequence author aron culotta <a href= mailto culotta >culotta edu< a> make ampersand xml friendly pipe serializable make ampersand xml friendly instance pipe instance carrier token sequence ts = token sequence carrier get data i = 0 i < ts size i++ token t = ts get i s = t get text s index != 1 s index amp != 1 already friendly carrier s replace all amp t set text s carrier serialization serial u = 1 u r r e n t s e r i a l v e r s i o n = 0 write output stream out i o out write u r r e n t s e r i a l v e r s i o n read input stream in i o not found = in read 