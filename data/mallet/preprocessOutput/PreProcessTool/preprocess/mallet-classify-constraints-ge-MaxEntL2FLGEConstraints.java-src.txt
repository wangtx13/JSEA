2011 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e classify constraints ge expectation constraint use g e penalizes l 2^2 difference from target expectation multiple constraints are grouped together here to make things more efficient author gregory druck max ent l2 f l g e constraints max ent f l g e constraints normalize max ent l2 f l g e constraints num features num labels use values normalize num features num labels use values normalize = normalize get value value = 0 0 fi constraints keys max ent f l g e constraint constraint = constraints get fi constraint count > 0 0 value due to current constraint feature value = 0 0 label index = 0 label index < num labels ++label index ex normalize ex = constraint expectation label index constraint count ex = constraint expectation label index feature value = math pow constraint target label index ex 2 ! na n feature value ! infinite feature value value += feature value constraint weight value override add constraint fi ex weight constraints put fi max ent l2 f l g e constraint ex weight max ent l2 f l g e constraint max ent f l g e constraint max ent l2 f l g e constraint target weight target weight override get value count != 0 normalize 2 weight target count expectation count count 2 weight target expectation 