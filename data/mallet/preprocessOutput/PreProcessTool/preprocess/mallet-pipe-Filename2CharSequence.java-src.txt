2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e pipe io types instance sequence lexer given a filename contained in a read in contents into a sequence author andrew mc callum <a href= mailto >mccallum edu< a> filename2 sequence pipe serializable filename2 sequence instance pipe instance carrier filename = carrier get data carrier set data pipe buffered reader reader filename io i o e illegal argument i o carrier sequence pipe reader reader io i o b u f s i z e = 2048 buf = b u f s i z e count buffer sb = buffer b u f s i z e count = reader read buf 0 b u f s i z e count == 1 out count= +count sb append buf 0 count count == b u f s i z e sb serialization serial u = 1 u r r e n t s e r i a l v e r s i o n = 0 write output stream out i o out write u r r e n t s e r i a l v e r s i o n read input stream in i o not found = in read 