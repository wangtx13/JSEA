logging logger optimize optimizable types matrix ops logger a r f objective function that sum multiple objective functions that implement optimizable gradient value author gregory druck author gaurav chandalia r f optimizable gradient values optimizable gradient value logger logger = logger get logger r f optimizable gradient values get name cached value weights stamp cached gradient weights stamp cached value = n e g a t i v e i n f i n i t y cached gradient optimizable gradient value optimizables r f crf crf r f whose we wish to estimate opts optimizable gradient value objective functions are estimated maximizing sum individual objective functions r f optimizable gradient values r f crf optimizable gradient value opts crf = crf optimizables = opts cached gradient = crf get num factors cached value weights stamp = 1 cached gradient weights stamp = 1 get num crf get num factors get buffer crf get buffer get parameter index crf get parameter index set buff crf set buff crf weights value changed set parameter index value crf set parameter index value crf weights value changed log probability training sequence labels and prior over get value crf weights value change stamp != cached value weights stamp cached value not up to date it was calculated a different set r f weights cached value = 0 i = 0 i < optimizables length i++ cached value += optimizables i get value cached value weights stamp = crf weights value change stamp cached value now no longer stale logger info get value = +cached value cached value get value gradient buffer cached gradient weights stamp != crf weights value change stamp get value matrix ops set all cached gradient 0 b2 = buffer length i = 0 i < optimizables length i++ matrix ops set all b2 0 optimizables i get value gradient b2 matrix ops plus equals cached gradient b2 cached gradient weights stamp = crf weights value change stamp arraycopy cached gradient 0 buffer 0 cached gradient length 