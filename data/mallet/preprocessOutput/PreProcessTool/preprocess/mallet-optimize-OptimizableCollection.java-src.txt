optimize list types matrix ops optimizable collection gradient value optimizable gradient value list< optimizable gradient value> optimizables gradient value optimizable gradient value ops optimizables = list< optimizable gradient value> ops length optimizable gradient value o ops optimizables add o get value gradient buffer b2 = buffer length optimizable gradient value o optimizables matrix ops set all b2 0 o get value gradient b2 matrix ops plus equals buffer b2 get value ret = 0 optimizable gradient value o optimizables ret += o get value ret here we rely on all optimizables pointing to same set parameters! get num optimizables get 0 get num get parameter index optimizables get 0 get parameter index get buffer optimizables get 0 get buffer set parameter index value optimizables get 0 set parameter index value set params optimizables get 0 set params 