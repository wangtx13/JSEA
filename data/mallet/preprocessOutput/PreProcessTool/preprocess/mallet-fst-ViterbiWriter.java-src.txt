io output stream io i o io print stream types feature vector types instance types instance list types sequence types token sequence prints input instances along features and and predicted labels to a <p> to control number times output has to be printed override link transducer trainer precondition <p> name output <tt>filename prefix + description + iteration number + viterbi < tt> viterbi writer transducer evaluator filename prefix output encoding = u t f 8 viterbi writer filename prefix instance list instance lists descriptions instance lists descriptions filename prefix = filename prefix viterbi writer filename prefix instance list instance list1 description1 filename prefix instance list instance list1 description1 viterbi writer filename prefix instance list instance list1 description1 instance list instance list2 description2 filename prefix instance list instance list1 instance list2 description1 description2 viterbi writer filename prefix instance list instance list1 description1 instance list instance list2 description2 instance list instance list3 description3 filename prefix instance list instance list1 instance list2 instance list3 description1 description2 description3 preamble transducer trainer tt we t want to print iteration number and cost so here we override behavior in superclass suppress warnings unchecked override evaluate instance list transducer trainer transducer trainer instance list instances description iteration = transducer trainer get iteration viterbi filename = filename prefix + description + iteration + viterbi print stream viterbi output stream output stream fos = output stream viterbi filename output encoding == viterbi output stream = print stream fos viterbi output stream = print stream fos output encoding r f model write viterbi output prefix + +description + iteration+ model i o e err couldn t open viterbi output +viterbi filename+ continuing without viterbi output trace i = 0 i < instances size i++ viterbi output stream != viterbi output stream viterbi path +description+ instance # +i instance instance = instances get i sequence input = sequence instance get data token sequence source token sequence = instance get source token sequence source token sequence = token sequence instance get source sequence output = sequence instance get target input size == output size sequence pred output = transducer trainer get transducer transduce input pred output size == output size j = 0 j < output size j++ feature vector fv = feature vector input get j viterbi output stream tokens at j + +true output get j to + +pred output get j to + + fv to source token sequence != viterbi output stream print source token sequence get j get text + viterbi output stream output get j to + +pred output get j to + + fv to 