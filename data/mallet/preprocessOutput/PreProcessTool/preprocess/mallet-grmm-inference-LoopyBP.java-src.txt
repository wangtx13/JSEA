2003 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e inference iterator collections list random io output stream io i o io input stream types loopy belief propagation algorithm approximate inference in general graphical models created wed nov 5 19 30 15 2003 author <a href= mailto casutton > charles sutton< a> $ loopy b p v 1 1 2007 10 22 21 37 49 exp $ loopy b p belief propagation d e f a u l t m a x i t e r = 1000 max iter random rand = random set use caching use caching use caching = use caching note does not have sophisticated terminator that we ve got in t r p loopy b p belief propagation sum product message strategy d e f a u l t m a x i t e r loopy b p max iter belief propagation sum product message strategy max iter loopy b p belief propagation message strategy messager max iter messager max iter = max iter inferencer create max product loopy b p max product message strategy d e f a u l t m a x i t e r loopy b p set rand random rand rand = rand compute marginals factor graph mdl init graph mdl iter iter = 0 iter < max iter iter++ logger finer async loopy b p iteration +iter propagate mdl has converged copy old messages iter used = iter iter >= max iter logger info loopy b p quitting not converged after +max iter+ iterations iter used++ there s an off one b location above logger info async loopy b p converged +iter used+ iterations done graph mdl propagate factor graph mdl send all messages in random order list factors = list mdl factors collections shuffle factors rand iterator it = factors iterator it has next factor factor = factor it next iterator vit = factor var set iterator vit has next variable from = variable vit next send message mdl from factor iterator it = factors iterator it has next factor factor = factor it next iterator vit = factor var set iterator vit has next variable to = variable vit next send message mdl factor to serialization serial u = 1 seralization incompatible changes are made to these classes then smarts can be added to these backward compatibility write output stream out i o out write read input stream in i o not found in read 