topics types gnu trove t hash map io a wrapper a topic model to be used from r statistical through r r does not distinguish between integers and floating point numbers so many these simply translate doubles to ints r topic model parallel topic model instance list instances = r topic model num topics alpha beta math floor num topics alpha beta load documents filename instances = instance list load filename add instances instances load documents instance list instances instances = instances add instances instances a helper that simplifies casting from r add instance instance list instances text instances add thru pipe instance text add instances instance list instances ids texts i = 0 i < ids length i++ instances add thru pipe instance texts i ids i set alpha optimization frequency burnin set burnin period math floor burnin set optimize interval math floor frequency train num iterations set num iterations math floor num iterations estimate e run iterated conditional modes maximize num iterations maximize math floor num iterations get alpha alpha get vocabulary vocab = alphabet size type = 0 type < num types type++ vocab type = alphabet lookup type vocab get document names doc names = data size doc = 0 doc < doc names length doc++ doc names doc = data get doc instance get name doc names get word frequencies instances == illegal state you must load instances before you can count features result = num types 2 t hash map doc counts = t hash map instance instance instances feature sequence features = feature sequence instance get data i=0 i<features get length i++ doc counts adjust or put value features get index at position i 1 1 keys = doc counts keys i = 0 i < keys length i++ feature = keys i result feature 0 += doc counts get feature result feature 1 ++ doc counts = t hash map result topic model diagnostics get diagnostics num words topic model diagnostics math floor num words write state filename print state filename e err e 