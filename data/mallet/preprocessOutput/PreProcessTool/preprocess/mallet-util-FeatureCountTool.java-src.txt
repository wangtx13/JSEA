types gnu trove formatter locale logging io text number format feature count tool logger logger = logger get logger feature count tool get name command option input = command option feature count tool input f i l e n a m e filename input instance list feature counts instance list instances num features document frequencies feature count tool instance list instances instances = instances num features = instances get data alphabet size feature counts = num features document frequencies = num features get feature counts feature counts get document frequencies document frequencies count t hash map doc counts = t hash map index = 0 instances size == 0 logger info instance list empty instances get 0 get data feature sequence instance instance instances feature sequence features = feature sequence instance get data i=0 i<features get length i++ doc counts adjust or put value features get index at position i 1 1 keys = doc counts keys i = 0 i < keys length i++ feature = keys i feature counts feature += doc counts get feature document frequencies feature ++ doc counts = t hash map index++ index % 1000 == 0 err index instances get 0 get data feature vector instance instance instances feature vector features = feature vector instance get data location = 0 location < features num locations location++ feature = features index at location location value = features value at location location document frequencies feature ++ feature counts feature += value index++ index % 1000 == 0 err index logger info unsupported data + instances get 0 get data get get name print counts alphabet alphabet = instances get data alphabet number format nf = number format get instance nf set minimum fraction digits 0 nf set maximum fraction digits 6 nf set grouping used feature = 0 feature < num features feature++ formatter formatter = formatter builder locale u s formatter format %s %s %d alphabet lookup feature to nf format feature counts feature document frequencies feature out formatter alphabet get pruned alphabet min docs max docs min count max count alphabet input alphabet = instances get data alphabet alphabet output alphabet = alphabet input type = 0 input type < num features input type++ feature counts input type >= min count feature counts input type <= max count document frequencies input type >= min docs document frequencies input type <= max docs output alphabet lookup index input alphabet lookup input type output alphabet command option set summary feature count tool print feature counts and instances per feature eg document frequencies in an instance list command option process feature count tool instance list instances = instance list load input value feature count tool counter = feature count tool instances counter count counter print counts 