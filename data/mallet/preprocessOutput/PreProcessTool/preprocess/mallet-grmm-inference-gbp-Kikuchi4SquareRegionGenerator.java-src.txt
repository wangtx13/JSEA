2003 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e inference gbp iterator types factor types factor graph types undirected grid types variable utils created may 31 2005 author < a h r e f= mailto casutton edu>casutton edu< a> $ kikuchi4 square region generator v 1 1 2007 10 22 21 37 58 exp $ kikuchi4 square region generator region graph generator region graph construct region graph factor graph mdl mdl undirected grid region graph rg = region graph undirected grid grid = undirected grid mdl first set up regions all x = 0 x < grid get width 1 x++ y = 0 y < grid get height 1 y++ variable vars = variable grid get x y grid get x+1 y grid get x+1 y+1 grid get x y+1 factor edges = factor mdl factor vars 0 vars 1 mdl factor vars 1 vars 2 mdl factor vars 2 vars 3 mdl factor vars 0 vars 3 create region 4 clique region four square = region vars edges create 1 clique region i = 0 i < 4 i++ variable var = vars i factor ptl = mdl factor var ptl != four square factors add ptl create edge regions and connect to everyone i = 0 i < 4 i++ factor edge ptl = edges i region edge rgn = rg find region edge ptl rg add four square edge rgn variable v1 = variable edge rgn vars get 0 region node rgn = create var region rg mdl v1 edge rgn factors add all node rgn factors rg add edge rgn node rgn variable v2 = variable edge rgn vars get 1 node rgn = create var region rg mdl v2 edge rgn factors add all node rgn factors rg add edge rgn node rgn rg compute inference caches rg unsupported operation kikuchi4 square region generator requires that you use undirected grid region create var region region graph rg factor graph mdl variable v1 factor ptl = mdl factor v1 ptl == rg find region v1 rg find region ptl check all singles region graph rg region node regions iterator it = rg iterator it has next region region = region it next region vars size == 1 utils index node regions region < 0 illegal state huh? check too many doubles region graph rg factor graph mdl nv = mdl factors size doubles = 0 iterator it = rg iterator it has next region region = region it next region vars size == 2 doubles++ doubles > nv illegal state huh? 