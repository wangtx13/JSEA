2002 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e author andrew mc callum <a href= mailto >mccallum edu< a> pipe iterator list iterator regex io types instance an iterator that generates instances from an initial directory or set directories iterator will recurse through sub directories each filename becomes data field an instance and targets are set to to set target values to directory name use iterator instead <p> author andrew mc callum <a href= mailto >mccallum edu< a> author gregory druck <a href= mailto gdruck >gdruck edu< a> unlabeled iterator iterator< instance> filter filter list< file> iterator< file> sub iterator starting directories min index count special value that means to use directories i get path target name xxx note that these are specific to u n i x directory delimiter characters! fix use label names directories specified in constructor optionally removing prefix all starting directories pattern s t a r t i n g d i r e t o r i e s = pattern compile s t a r t i n g d i r e t o r i e s use label names first directory in filename pattern f i r s t d i r e t o r y = pattern compile ? ^ + use label name last directory in filename pattern l a s t d i r e t o r y = pattern compile ^ + ^ + was ^ ^ + use label names all directory names in filename pattern a l l d i r e t o r i e s = pattern compile ^ ^ + added fuchun peng list< file> get construct a iterator that will supply filenames within initial directories instances directories directories to collect files from filter implementing filter that will decide which names to accept may be target pattern regex pattern applied to filename whose first parenthesized group on matching taken to be target value generated instance pattern applied to directory matcher find then all instances will have target remove prefix that modifies behavior s t a r t i n g d i r e t o r i e s pattern removing prefix all initially specified directories leaving remainder each filename target value unlabeled iterator directories filter filter starting directories = directories filter = filter min index = directories length = list< file> i = 0 i < directories length i++ !directories i directory illegal argument directories i get absolute path + not a directory min index i = size fill directories i filter sub iterator = iterator count = 0 dir strings = directories length i = 0 i < directories length i++ dir strings i = directories i to array2 sa ret = sa length i = 0 i < sa length i++ ret i = sa i ret unlabeled iterator directories filter ff array2 directories ff unlabeled iterator directory filter filter directory filter unlabeled iterator directory directory unlabeled iterator directories directories unlabeled iterator directory directory unlabeled iterator directory filter filter directory filter fill directory filter filter list< file> files count = 0 directory contents = directory list files i = 0 i < directory contents length i++ directory contents i directory count += fill directory contents i filter files filter == || filter accept directory contents i files add directory contents i count++ count pipe input iterator instance next next = sub iterator next count++ instance next next to u r i remove illegal state iterator< instance> does not support remove culotta 9 11 03 next sub iterator next has next sub iterator has next 