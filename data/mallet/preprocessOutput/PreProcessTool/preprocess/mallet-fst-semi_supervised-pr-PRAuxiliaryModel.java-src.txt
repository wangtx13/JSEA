2011 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e semi supervised pr list iterator r f transducer semi supervised pr constraints p r constraint types feature vector types sequence auxiliar model q e step i projection in posterior regularization p r author gregory druck p r auxiliary model transducer serial u = 1 l num list< p r constraint> constraints r f base model p r auxiliary model r f base model list< p r constraint> constraints base model = base model constraints = constraints index = 0 = constraints size p r constraint constraint constraints index = constraint num dimensions index++ num += constraint num dimensions p r auxiliary model r f base model list< p r constraint> constraints base model = base model constraints = constraints = p r constraint constraint constraints num += constraint num dimensions p r auxiliary model copy list< p r constraint> copy = list< p r constraint> p r constraint constraint constraints copy add constraint copy should not be changed in copy so we can use same p r auxiliary model base model copy pre process index position sequence input p r constraint constraint constraints constraint pre process feature vector input get position get value value = 0 index = 0 p r constraint constraint constraints value += constraint get auxiliary value contribution index index++ value get complete value contribution value = 0 index = 0 p r constraint constraint constraints value += constraint get complete value contribution index index++ value get value gradient gradient index = 0 start = 0 p r constraint constraint constraints constraint gradient = constraint num dimensions constraint get gradient index constraint gradient arraycopy constraint gradient 0 gradient start constraint gradient length start += constraint num dimensions index++ get weight index position sequence input transition iterator iter weight = 0 si1 = iter get source state get index si2 = iter get destination state get index constr index = 0 p r constraint constraint constraints weight += constraint get score feature vector input get position position si1 si2 constr index constr index++ weight increment transition index position sequence input transition iterator iter prob si1 = iter get source state get index si2 = iter get destination state get index p r constraint constraint constraints constraint increment expectations feature vector input get position position si1 si2 prob zero expectations p r constraint constraint constraints constraint zero expectations num num get params params length == num start = 0 i = 0 i < length i++ arraycopy i 0 params start i length start += i length get parameter index index > 0 constr index = 0 p r constraint constraint constraints index < constraint num dimensions constr index index constr index++ index = constraint num dimensions runtime index not found + index set params params length == num start = 0 i = 0 i < length i++ arraycopy params start i 0 i length start += i length set parameter index value index > 0 constr index = 0 p r constraint constraint constraints index < constraint num dimensions constr index index = value constr index++ index = constraint num dimensions runtime index not found + index num constraints constraints size p r constraint get constraint index constraints get index r f get base model base model override num states base model num states override state get state index base model get state index override iterator initial state iterator base model initial state iterator 