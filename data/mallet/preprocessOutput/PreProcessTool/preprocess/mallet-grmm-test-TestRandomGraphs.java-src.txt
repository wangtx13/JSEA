2003 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e test junit framework junit textui test runner random iterator io io writer io print writer io i o inference types created mar 26 2005 author < a h r e f= mailto casutton edu>casutton edu< a> $ test random graphs v 1 1 2007 10 22 21 37 40 exp $ test random graphs test test random graphs name name test suite test suite test random graphs test attractive graphs i o random r = random 31421 rep = 0 rep < 5 rep++ factor graph mdl = random graphs random attractive grid 5 0 5 r out mdl dump t r p trp = t r p create max product trp compute marginals mdl assignment assn = trp best assignment print writer out = print writer writer attract +rep+ dot mdl print dot out assn out close test repulsive graphs i o random r = random 31421 rep = 0 rep < 5 rep++ factor graph mdl = random graphs random repulsive grid 5 0 5 r t r p trp = t r p create max product trp compute marginals mdl assignment assn = trp best assignment print writer out = print writer writer repulse +rep+ dot mdl print dot out assn out close test frustrated graphs i o random r = random 31421 rep = 0 rep < 5 rep++ factor graph mdl = random graphs random frustrated grid 5 0 5 r t r p trp = t r p create max product trp compute marginals mdl assignment assn = trp best assignment print writer out = print writer writer mixed +rep+ dot mdl print dot out assn out close test frustrated grid i o random r = random 0 rep = 0 rep < 100 rep++ factor graph mdl = random graphs random frustrated grid 10 1 0 r 100 variable factors + 180 edge factors equals 280 mdl factors size equals 100 mdl num variables counts = 6 i = 0 i < mdl num variables i++ variable var = mdl get i degree = mdl get degree var variable +var+ has degree +degree degree >= 3 degree <= 5 counts degree ++ equals counts 0 0 equals counts 1 0 equals counts 2 0 equals counts 3 4 equals counts 4 32 equals counts 5 64 test uniform grid undirected grid grid = undirected grid random graphs create uniform grid 3 equals 9 grid num variables equals 12 grid factors size brute force inferencer inf = brute force inferencer table factor joint = table factor inf joint grid assignment iterator it = joint assignment iterator it has next it advance equals 9 math log 2 joint log value it 1e 3 test uniform grid observations factor graph grid = random graphs create grid obs random graphs uniform factor generator random graphs uniform factor generator 3 equals 18 grid num variables equals 12 + 9 grid factors size inferencer inf = loopy b p inf compute marginals grid iterator it = grid variables iterator it has next variable var = variable it next factor marg = inf lookup marginal var assignment iterator assn it = marg assignment iterator assn it has next equals math log 2 marg log value assn it 1e 3 assn it advance throwable test suite suite length > 0 suite = test suite i = 0 i < length i++ suite add test test random graphs i suite = test suite suite test runner run suite 