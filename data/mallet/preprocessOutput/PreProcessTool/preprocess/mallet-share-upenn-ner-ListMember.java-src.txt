share upenn ner io pipe types gnu trove checks membership in a lexicon in a text multi token items are supported but only tokens are uniformly separated or not separated spaces that u s a acceptable san francisco but not st petersburg list member pipe io serializable name set lexicon ignore min max list member feature name lex ignore name = feature name ignore = ignore !lex illegal argument +lex file+ not found lexicon = t hash set min = 99999 max = 1 buffered reader = buffered reader reader lex ready s = read line trim s equals ignore blank lines count = count tokens s count < min min = count count > max max = count ignore lexicon add s to lower lexicon add s i o e err problem +lex file+ +e exit 0 instance pipe instance carrier token sequence seq = token sequence carrier get data marked = seq size i=0 i<seq size i++ buffer sb = buffer buffer sbs = buffer separate tokens spaces j=i j<i+max j<seq size j++ test tokens from i to j text = seq get j get text sb append text sbs length == 0 sbs append text sbs append +text test = ignore ? sb to to lower sb to tests = ignore ? sbs to to lower sbs to j i+1 >= min lexicon contains test || lexicon contains tests mark from i j marked i=0 i<seq size i++ marked i seq get i set feature value name 1 0 carrier mark from a b marked i=a i<=b i++ marked i = m u s t count tokens same way tokenizer does! count tokens s copied from wei s enron message2 token sequence tokenizer wordst = tokenizer s ~`! #$%^ += |\\ \ < >? \r wordst count tokens 