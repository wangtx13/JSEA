cluster tui gnu trove t list io buffered reader io io output stream io reader io i o io output stream list logging logger cluster clustering cluster clusterings cluster record pipe noop pipe pipe pipe iterator iterator types alphabet types instance types instance list types label alphabet command option logger in progresspublic text2 clusterings logger logger = logger get logger text2 clusterings get name i o command option set summary text2 clusterings a tool to convert a list text files to a clusterings command option process text2 clusterings dirs value length == 0 logger warning you must include input d i r1 d i r2 in order to specify a + list directories containing documents each exit 1 clustering clusterings = clustering dirs value length fi = 0 i = 0 i < dirs value length i++ alphabet field alph = alphabet alphabet value alph = alphabet directory = dirs value i subdirs = get sub dirs directory alphabet cluster alph = alphabet instance list instances = instance list noop t list labels = t list j = 0 j < subdirs length j++ list< file> records = iterator subdirs j get label = cluster alph lookup index subdirs j to k = 0 k < records size k++ fi % 100 == 0 out print fi fi % 10 == 0 out print fi % 1000 == 0 fi > 0 out out flush fi++ record = records get k labels add label instances add instance record field alph value alph parse record label record to record to clusterings i = clustering instances subdirs length labels to logger info read + fi + in + clusterings length + clusterings output stream oos = output stream output stream output value oos write clusterings clusterings oos close e logger warning writing clustering to + output value + + e e print stack trace get sub dirs dir i o list< file> ret = list< file> fs = dir list files f fs f directory !f get name matches ^\\ +$ ret add f ret to parse f i o buffered reader r = buffered reader reader f line = list< > lines = list< > line = r read line != line = line trim words = line split \\s+ words length > 1 lines add words ret = lines size i = 0 i < lines size i++ ret i = lines get i ret command option spaced strings dirs = command option spaced strings text2 clusterings input d i r directories containing text files to be clustered one directory per clustering command option output = command option text2 clusterings output f i l e n a m e text clusterings filename to write clustering 