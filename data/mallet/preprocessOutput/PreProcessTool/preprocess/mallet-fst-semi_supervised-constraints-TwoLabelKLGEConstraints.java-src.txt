2010 m a l l e t m achine languag e ~mccallum 1 0 further ` l i e n s e semi supervised constraints list gnu trove t hash map semi supervised state label map a set constraints on distributions over consecutive labels conditioned an input features to be used g e and penalizes k l divergence between model and target distributions multiple constraints are grouped together here to make things more efficient author gregory druck two label k l g e constraints two label g e constraints two label k l g e constraints two label k l g e constraints list< two label g e constraint> constraints list t hash map constraints map state label map map constraints list constraints map map g e constraint copy two label k l g e constraints constraints list constraints map map override add constraint fi target weight constraints list add two label k l g e constraint target weight constraints map put fi constraints list size 1 override get value value = 0 0 fi constraints map keys two label g e constraint constraint = constraints list get constraints map get fi constraint count > 0 0 constraint value = 0 0 prev = 0 prev < map get num labels prev li++ curr = 0 curr < map get num labels curr li++ constraint target prev curr > 0 0 constraint expectation prev curr == 0 0 n e g a t i v e i n f i n i t y p log q p log p negative k l constraint value += constraint target prev curr math log constraint expectation prev curr constraint count math log constraint target prev curr ! na n constraint value ! infinite constraint value value += constraint value constraint weight value two label k l g e constraint two label g e constraint two label k l g e constraint target weight target weight override get value prev curr count != 0 target prev curr == 0 expectation prev curr == 0 0 weight target prev curr expectation prev curr 